{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/evaporate/evaporate.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///./node_modules/safe-buffer/index.js","webpack:///./node_modules/sha.js/hash.js","webpack:///./node_modules/sha.js/index.js","webpack:///./node_modules/sha.js/sha.js","webpack:///./node_modules/sha.js/sha1.js","webpack:///./node_modules/sha.js/sha224.js","webpack:///./node_modules/sha.js/sha256.js","webpack:///./node_modules/sha.js/sha384.js","webpack:///./node_modules/sha.js/sha512.js","webpack:///./node_modules/spark-md5/spark-md5.js","webpack:///(webpack)/buildin/global.js","webpack:///./s3upload.js"],"names":["exports","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","Uint8Array","Array","code","i","len","length","charCodeAt","getLens","b64","Error","validLen","indexOf","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","push","join","extraBytes","parts","maxChunkLength","len2","base64","require","ieee754","isArray","Buffer","SlowBuffer","INSPECT_MAX_BYTES","TYPED_ARRAY_SUPPORT","global","undefined","typedArraySupport","kMaxLength","__proto__","prototype","foo","subarray","e","createBuffer","that","RangeError","arg","encodingOrOffset","allocUnsafe","from","poolSize","_augment","value","TypeError","ArrayBuffer","fromArrayBuffer","fromString","fromObject","Symbol","species","Object","defineProperty","configurable","assertSize","size","alloc","fill","encoding","checked","allocUnsafeSlow","string","isEncoding","actual","write","slice","fromArrayLike","array","byteOffset","obj","isBuffer","copy","buffer","isnan","type","data","toString","b","_isBuffer","compare","a","x","y","Math","min","String","toLowerCase","concat","list","pos","buf","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","swap16","swap32","swap64","arguments","apply","equals","inspect","str","max","match","target","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","val","dir","isNaN","arrayIndexOf","call","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","j","includes","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","_arr","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","ret","out","toHex","bytes","newBuf","sliceLen","checkOffset","ext","readUIntLE","noAssert","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","floor","objectWriteUInt16","littleEndian","writeUInt16LE","writeUInt16BE","objectWriteUInt32","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","set","INVALID_BASE64_RE","base64clean","stringtrim","replace","trim","units","Infinity","leadSurrogate","byteArray","c","hi","lo","src","dst","FAR_FUTURE","Date","HOURS_AGO","PENDING","EVAPORATING","COMPLETE","PAUSED","CANCELED","ERROR","ABORTED","PAUSING","PAUSED_STATUSES","ACTIVE_STATUSES","ETAG_OF_0_LENGTH_BLOB","PARTS_MONITOR_INTERVAL_MS","IMMUTABLE_OPTIONS","S3_EXTRA_ENCODED_CHARS","l","Evaporate","config","extend","readableStreams","readableStreamPartMethod","bucket","logging","maxConcurrentParts","partSize","retryBackoffPower","maxRetryBackoffSecs","progressIntervalMS","cloudfront","s3Acceleration","mockLocalStorage","encodeFilename","computeContentMd5","allowS3ExistenceOptimization","onlyRetryForSameFileName","timeUrl","cryptoMd5Method","cryptoHexEncodedHash256","aws_key","awsRegion","awsSignatureVersion","sendCanonicalRequestToSignerUrl","s3FileCacheHoursAgo","signParams","signHeaders","customAuthMethod","maxFileSize","signResponseHandler","xhrWithCredentials","localTimeOffset","evaporateChanged","abortCompletionThrottlingMs","window","console","d","log","w","warn","error","_instantiationError","validateEvaporateOptions","supported","noOpLogger","_d","setHours","getHours","self","getLocalTimeOffset","then","pendingFiles","queuedFiles","filesInProcess","historyCache","HistoryCache","create","evapConfig","Promise","resolve","reject","xhr","XMLHttpRequest","open","getTime","onreadystatechange","readyState","status","server_date","parse","responseText","onerror","send","evaporatingCount","startNextFile","reason","fileUpload","shift","decodeURIComponent","name","evaporatingCnt","fileCleanup","removeAtIndex","done","consumeRemainingSlots","queueFile","add","file","pConfig","fileConfig","forEach","s3EncodedObjectName","FileUpload","started","uploadInitiated","progress","complete","cancelled","paused","resumed","pausing","nameChanged","info","beforeSigner","xAmzHeadersAtInitiate","notSignedHeadersAtInitiate","xAmzHeadersCommon","xAmzHeadersAtUpload","xAmzHeadersAtComplete","priority","loadedBytes","sizeBytes","eTag","fileKey","id","deferredCompletion","promise","cancel","_cancelAll","_cancelOne","promises","key","hasOwnProperty","stop","all","pause","options","force","_pauseAll","_pauseOne","_pause","resume","_resumeAll","_resumeOne","resumeFile","forceRetry","avail","consumed","consumeSlots","File","Blob","webkitSlice","mozSlice","signerUrl","FileReader","readAsArrayBuffer","incr","con","evaporate","fileTotalBytesUploaded","s3Parts","partsOnS3","partsInProcess","partsToUpload","numParts","defer","abortedByUser","progressInterval","startTime","loaded","totalUploaded","updateLoaded","loadedNow","progessStats","speed","readableSpeed","remainingSize","secondsLeft","fileSize","delta","avgSpeed","stats","readableFileSize","round","onProgress","startMonitor","clearInterval","setInterval","bind","stopMonitor","getRemainingSlots","evapCount","lastPartSatisfied","uploadId","awsKey","getUnfinishedFileUpload","existenceOptimized","firstMd5Digest","reuseS3Object","catch","uploadFileFromScratch","resumeInterruptedUpload","_uploadComplete","uploadFile","_abortUpload","completeUpload","setStatus","abortUpload","abortParts","map","p","awsRequest","awsDeferred","_startCompleteUpload","callComplete","toAbort","s3Part","abort","partNumber","makeParts","firstPart","ceil","partsDeferredPromises","cleanUpAfterPart","part","makePart","PutPart","loadedBytesPrevious","isEmpty","md5_digest","s","createUploadFile","uploadKey","newUpload","fileType","lastModifiedDate","dateISOString","lastModified","createdAt","toISOString","saveUpload","updateUploadFile","updates","uploads","getSavedUploads","upload","completeUploadFile","completedAt","setItem","JSON","stringify","removeUploadFile","removeUpload","savedUploads","u","canRetryUpload","partSuccess","putRequest","request","step","resetLoadedBytes","msg","listPartsSuccess","listPartsRequest","partsXml","partNumberMarker","partRegex","cp","exec","elementText","LastModified","makePartsfromPartsOnS3","uploadedPart","finishedUploadingAt","CompleteMultipartUpload","getCompletedPayload","completeDoc","satisfied","canStartPart","delaySend","getStartedPromise","allInProcess","remainingSlots","errorExceptionStatus","InitiateMultipartUpload","uploadParts","DeleteMultipartUpload","ResumeInterruptedUpload","firstS3Part","getPartMd5Digest","ReuseS3Object","SignedS3AWSRequest","attempts","awsUrl","awsHost","uri","hostname","r","contentType","updateRequest","authorize","getPath","path","SigningClass","signingVersion","signer","success","currentXhr","backOffWait","errorHandler","setTimeout","trySend","getPayload","success_status","success404","stringToSign","encodeURIComponent","canonicalRequest","signResponse","payload","signatureDateTime","sendRequestToAWS","url","all_headers","query_string","not_signed_headers","x_amz_headers","response_match","response","RegExp","getAwsResponse","method","setRequestHeader","authorizationString","setHeaders","onprogress","payloadPromise","dateString","authorizationMethod","authorizationSuccess","authorization","auth","CancelableS3AWSRequest","constructor","SignedS3AWSRequestWithRetryLimit","maxRetries","rejectedSuccess","getResponseHeader","setupRequest","nextPartNumber","contentSha256","stalledInterval","stalledPartMonitor","evt","lastLoaded","errMsg","streamToArrayBuffer","stream","readable","on","onData","onEnd","onClose","err","cleanup","removeListener","payloadFromStream","payloadFromBlob","streamPromise","slicerFn","blob","reader","onloadend","result","AwsSignature","datetime","timeOffset","AwsSignatureV2","header_key_array","sort","header_key","toUTCString","AwsSignatureV4","_cr","authParts","credentials","credentialString","headers","canonicalHeaders","signedHeaders","signParts","credParts","canonicalQueryString","qs","search","searchParts","split","encoded","nameValue","sorted","getPayloadSha256Content","keys","addHeader","amzHeaders","sortedKeys","unsigned_headers","not_signed","signed_headers","k","canonParts","pathname","AuthorizationMethod","makeSignParamsObject","params","param","withCredentials","header","AuthorizationCustom","aws_url","fileName","fileParts","encodedParts","enc","charAt","href","URL","document","createElement","protocol","port","hash","host","date","source","element","deferred","obj1","obj2","obj3","purge","getItem","idx","splice","toFixed","cacheStore","localStorage","removeItem","test","module","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","LN2","inherits","ctor","superCtor","super_","enumerable","writable","TempCtor","factory","registeredInModuleLoader","define","OldCookies","Cookies","api","noConflict","attributes","init","converter","defaults","expires","setMilliseconds","getMilliseconds","escape","stringifiedAttributes","attributeName","cookie","cookies","rdecode","json","get","getJSON","remove","withConverter","copyProps","SafeBuffer","Hash","blockSize","finalSize","_block","_finalSize","_blockSize","_len","update","block","accum","assigned","remainder","_update","digest","rem","bits","lowBits","highBits","_hash","SHA","algorithm","Algorithm","sha","sha1","sha224","sha256","sha384","sha512","K","W","Sha","_w","_a","_b","_c","_e","rotl5","rotl30","ft","M","t","H","Sha1","rotl1","Sha256","Sha224","_f","_g","_h","ch","z","maj","sigma0","sigma1","gamma0","gamma1","f","g","h","T1","T2","SHA512","Sha384","_ah","_bh","_ch","_dh","_eh","_fh","_gh","_hh","_al","_bl","_cl","_dl","_el","_fl","_gl","_hl","writeInt64BE","Sha512","Ch","xl","Gamma0","Gamma0l","Gamma1","Gamma1l","getCarry","ah","bh","dh","eh","fh","gh","hh","al","bl","cl","dl","el","fl","gl","hl","xh","gamma0l","gamma1l","Wi7h","Wi7l","Wi16h","Wi16l","Wil","Wih","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","Kih","Kil","chh","chl","t1l","t1h","t2l","t2h","add32","hex_chr","cmn","q","md5cycle","md5blk","md5blks","md5blk_array","md51","state","tail","substring","md51_array","rhex","hex","lsw","msw","clamp","to","begin","targetArray","sourceArray","toUtf8","unescape","utf8Str2ArrayBuffer","returnUInt8Array","buff","arrayBuffer2Utf8Str","concatenateArrayBuffers","first","second","hexToBinaryString","SparkMD5","reset","append","appendBinary","contents","_buff","_length","raw","_finish","getState","setState","destroy","hashBinary","content","Function","eval","createHash","cb","req","onload","onabort","disableSubmit","parseNameFromUrl","parseJson","updateProgressBar","progressRatio","bar","querySelector","style","width","className","alert","concurrentUploads","submitRow","buttons","querySelectorAll","disabled","beginUpload","finishUpload","awsBucketUrl","objectKey","link","setAttribute","innerHTML","pop","computeMd5","btoa","computeSha256","initiateMultipartUpload","signingUrl","awsBucket","cacheControl","contentDisposition","acl","serverSideEncryption","getAwsV4Signature","form","FormData","csrfTokenName","csrfInput","csrfToken","csrfCookieNameInput","generateAmazonHeaders","debug","awsS3ObjectKey","checkFileAndInitiateUpload","event","parentElement","files","dest","destinationCheckUrl","getAttribute","uploadParameters","object_key","access_key_id","region","bucket_url","cache_control","content_disposition","server_side_encryption"],"mappings":"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","file":"s3upload.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./s3upload.js\");\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/*Copyright (c) 2016, TT Labs, Inc.\n All rights reserved.\n\n Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\n Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\n Neither the name of the TT Labs, Inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.*/\n\n\n/***************************************************************************************************\n *                                                                                                 *\n *  version 2.1.4                                                                                  *\n *                                                                                                 *\n ***************************************************************************************************/\n\n(function () {\n  \"use strict\";\n\n  var FAR_FUTURE = new Date('2060-10-22'),\n      HOURS_AGO,\n      PENDING = 0, EVAPORATING = 2, COMPLETE = 3, PAUSED = 4, CANCELED = 5, ERROR = 10, ABORTED = 20, PAUSING = 30,\n      PAUSED_STATUSES = [PAUSED, PAUSING],\n      ACTIVE_STATUSES = [PENDING, EVAPORATING, ERROR],\n      ETAG_OF_0_LENGTH_BLOB = '\"d41d8cd98f00b204e9800998ecf8427e\"',\n      PARTS_MONITOR_INTERVAL_MS = 2 * 60 * 1000,\n      IMMUTABLE_OPTIONS = [\n        'maxConcurrentParts',\n        'logging',\n        'cloudfront',\n        'encodeFilename',\n        'computeContentMd5',\n        'allowS3ExistenceOptimization',\n        'onlyRetryForSameFileName',\n        'timeUrl',\n        'cryptoMd5Method',\n        'cryptoHexEncodedHash256',\n        'awsRegion',\n        'awsSignatureVersion',\n        'evaporateChanged'\n      ],\n      S3_EXTRA_ENCODED_CHARS =  {\n        33: \"%21\", // !\n        39: \"%27\", // '\n        40: \"%28\", // (\n        41: \"%29\", // )\n        42: \"%2A\"  // *\n      },\n      l;\n\n  var Evaporate = function (config) {\n    this.config = extend({\n      readableStreams: false,\n      readableStreamPartMethod: null,\n      bucket: null,\n      logging: true,\n      maxConcurrentParts: 5,\n      partSize: 6 * 1024 * 1024,\n      retryBackoffPower: 2,\n      maxRetryBackoffSecs: 300,\n      progressIntervalMS: 1000,\n      cloudfront: false,\n      s3Acceleration: false,\n      mockLocalStorage: false,\n      encodeFilename: true,\n      computeContentMd5: false,\n      allowS3ExistenceOptimization: false,\n      onlyRetryForSameFileName: false,\n      timeUrl: null,\n      cryptoMd5Method: null,\n      cryptoHexEncodedHash256: null,\n      aws_key: null,\n      awsRegion: 'us-east-1',\n      awsSignatureVersion: '4',\n      sendCanonicalRequestToSignerUrl: false,\n      s3FileCacheHoursAgo: null, // Must be a whole number of hours. Will be interpreted as negative (hours in the past).\n      signParams: {},\n      signHeaders: {},\n      customAuthMethod: undefined,\n      maxFileSize: null,\n      signResponseHandler: null,\n      xhrWithCredentials: false,\n      // undocumented, experimental\n      localTimeOffset: undefined,\n      evaporateChanged: function () {},\n      abortCompletionThrottlingMs: 1000\n    }, config);\n\n    if (typeof window !== 'undefined' && window.console) {\n      l = window.console;\n      l.d = l.log;\n      l.w = window.console.warn ? l.warn : l.d;\n      l.e = window.console.error ? l.error : l.d;\n    }\n\n    this._instantiationError = this.validateEvaporateOptions();\n    if (typeof this._instantiationError === 'string') {\n      this.supported = false;\n      return;\n    } else {\n      delete this._instantiationError;\n    }\n\n    if (!this.config.logging) {\n      // Reset the logger to be a no_op\n      l = noOpLogger();\n    }\n\n    var _d = new Date();\n    HOURS_AGO = new Date(_d.setHours(_d.getHours() - (this.config.s3FileCacheHoursAgo || -100)));\n    if (typeof config.localTimeOffset === 'number') {\n      this.localTimeOffset = config.localTimeOffset;\n    } else {\n      var self = this;\n      Evaporate.getLocalTimeOffset(this.config)\n          .then(function (offset) {\n            self.localTimeOffset = offset;\n          });\n    }\n    this.pendingFiles = {};\n    this.queuedFiles = [];\n    this.filesInProcess = [];\n    historyCache = new HistoryCache(this.config.mockLocalStorage);\n  };\n  Evaporate.create = function (config) {\n    var evapConfig = extend({}, config);\n    return Evaporate.getLocalTimeOffset(evapConfig)\n        .then(function (offset) {\n          evapConfig.localTimeOffset = offset;\n          return new Promise(function (resolve, reject) {\n            var e = new Evaporate(evapConfig);\n            if (e.supported === true) {\n              resolve(e);\n            } else {\n              reject(e._instantiationError);\n            }\n          });\n        });\n  };\n  Evaporate.getLocalTimeOffset = function (config) {\n    return new Promise(function (resolve, reject) {\n      if (typeof config.localTimeOffset === 'number') {\n        return resolve(config.localTimeOffset);\n      }\n      if (config.timeUrl) {\n        var xhr = new XMLHttpRequest();\n\n        xhr.open(\"GET\", config.timeUrl + '?requestTime=' + new Date().getTime());\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            if (xhr.status === 200) {\n              var server_date = new Date(Date.parse(xhr.responseText)),\n                  offset = server_date - new Date();\n              l.d('localTimeOffset is', offset, 'ms');\n              resolve(offset);\n            }\n          }\n        };\n\n        xhr.onerror = function (xhr) {\n          l.e('xhr error timeUrl', xhr);\n          reject('Fetching offset time failed with status: ' + xhr.status);\n        };\n        xhr.send();\n      } else {\n        resolve(0);\n      }\n    });\n  };\n  Evaporate.prototype.config = {};\n  Evaporate.prototype.localTimeOffset = 0;\n  Evaporate.prototype.supported = false;\n  Evaporate.prototype._instantiationError = undefined;\n  Evaporate.prototype.evaporatingCount = 0;\n  Evaporate.prototype.pendingFiles = {};\n  Evaporate.prototype.filesInProcess = [];\n  Evaporate.prototype.queuedFiles = [];\n  Evaporate.prototype.startNextFile = function (reason) {\n    if (!this.queuedFiles.length ||\n        this.evaporatingCount >= this.config.maxConcurrentParts) { return; }\n    var fileUpload = this.queuedFiles.shift();\n    if (fileUpload.status === PENDING) {\n      l.d('Starting', decodeURIComponent(fileUpload.name), 'reason:', reason);\n      this.evaporatingCnt(+1);\n      fileUpload.start();\n    } else {\n      // Add the file back to the stack, it's not ready\n      l.d('Requeued', decodeURIComponent(fileUpload.name), 'status:', fileUpload.status, 'reason:', reason);\n      this.queuedFiles.push(fileUpload);\n    }\n  };\n  Evaporate.prototype.fileCleanup = function (fileUpload) {\n    removeAtIndex(this.queuedFiles, fileUpload);\n    if (removeAtIndex(this.filesInProcess, fileUpload)) {\n      this.evaporatingCnt(-1);\n    }\n    fileUpload.done();\n    this.consumeRemainingSlots();\n  };\n  Evaporate.prototype.queueFile = function (fileUpload) {\n    this.filesInProcess.push(fileUpload);\n    this.queuedFiles.push(fileUpload);\n    if (this.filesInProcess.length === 1) {\n      this.startNextFile('first file');\n    }\n  };\n  Evaporate.prototype.add = function (file,  pConfig) {\n    var self = this,\n        fileConfig;\n    return new Promise(function (resolve, reject) {\n      var c = extend(pConfig, {});\n\n      IMMUTABLE_OPTIONS.forEach(function (a) { delete c[a]; });\n\n      fileConfig = extend(self.config, c);\n\n      if (typeof file === 'undefined' || typeof file.file === 'undefined') {\n        return reject('Missing file');\n      }\n      if (fileConfig.maxFileSize && file.file.size > fileConfig.maxFileSize) {\n        return reject('File size too large. Maximum size allowed is ' + fileConfig.maxFileSize);\n      }\n      if (typeof file.name === 'undefined') {\n        return reject('Missing attribute: name');\n      }\n\n      if (fileConfig.encodeFilename) {\n        // correctly encode to an S3 object name, considering '/' and ' '\n        file.name = s3EncodedObjectName(file.name);\n      }\n\n      var fileUpload = new FileUpload(extend({\n            started: function () {},\n            uploadInitiated: function () {},\n            progress: function () {},\n            complete: function () {},\n            cancelled: function () {},\n            paused: function () {},\n            resumed: function () {},\n            pausing: function () {},\n            nameChanged: function () {},\n            info: function () {},\n            warn: function () {},\n            error: function () {},\n            beforeSigner: undefined,\n            xAmzHeadersAtInitiate: {},\n            notSignedHeadersAtInitiate: {},\n            xAmzHeadersCommon: null,\n            xAmzHeadersAtUpload: {},\n            xAmzHeadersAtComplete: {}\n          }, file, {\n            status: PENDING,\n            priority: 0,\n            loadedBytes: 0,\n            sizeBytes: file.file.size,\n            eTag: ''\n          }), fileConfig, self),\n          fileKey = fileUpload.id;\n\n      self.pendingFiles[fileKey] = fileUpload;\n\n      self.queueFile(fileUpload);\n\n      // Resolve or reject the Add promise based on how the fileUpload completes\n      fileUpload.deferredCompletion.promise\n          .then(\n              function () {\n                self.fileCleanup(fileUpload);\n                resolve(decodeURIComponent(fileUpload.name));\n              },\n              function (reason) {\n                self.fileCleanup(fileUpload);\n                reject(reason);\n              }\n          );\n    })\n  };\n  Evaporate.prototype.cancel = function (id) {\n    return typeof id === 'undefined' ? this._cancelAll() : this._cancelOne(id);\n  };\n  Evaporate.prototype._cancelAll = function () {\n    l.d('Canceling all file uploads');\n    var promises = [];\n    for (var key in this.pendingFiles) {\n      if (this.pendingFiles.hasOwnProperty(key)) {\n        var file = this.pendingFiles[key];\n        if (ACTIVE_STATUSES.indexOf(file.status) > -1) {\n          promises.push(file.stop());\n        }\n      }\n    }\n    if (!promises.length) {\n      promises.push(Promise.reject('No files to cancel.'));\n    }\n    return Promise.all(promises);\n  };\n  Evaporate.prototype._cancelOne = function (id) {\n    var promise = [];\n    if (this.pendingFiles[id]) {\n      promise.push(this.pendingFiles[id].stop());\n    } else {\n      promise.push(Promise.reject('File does not exist'));\n    }\n    return Promise.all(promise);\n  };\n  Evaporate.prototype.pause = function (id, options) {\n    options = options || {};\n    var force = typeof options.force === 'undefined' ? false : options.force;\n    return typeof id === 'undefined' ? this._pauseAll(force) : this._pauseOne(id, force);\n  };\n  Evaporate.prototype._pauseAll = function (force) {\n    l.d('Pausing all file uploads');\n    var promises = [];\n    for (var key in this.pendingFiles) {\n      if (this.pendingFiles.hasOwnProperty(key)) {\n        var file = this.pendingFiles[key];\n        if (ACTIVE_STATUSES.indexOf(file.status) > -1) {\n          this._pause(file, force, promises);\n        }\n      }\n    }\n    return Promise.all(promises);\n  };\n  Evaporate.prototype._pauseOne = function (id, force) {\n    var promises = [],\n        file = this.pendingFiles[id];\n    if (typeof file === 'undefined') {\n      promises.push(Promise.reject('Cannot pause a file that has not been added.'));\n    } else if (file.status === PAUSED) {\n      promises.push(Promise.reject('Cannot pause a file that is already paused.'));\n    }\n    if (!promises.length) {\n      this._pause(file, force, promises);\n    }\n    return Promise.all(promises);\n  };\n  Evaporate.prototype._pause = function(fileUpload, force, promises) {\n    promises.push(fileUpload.pause(force));\n    removeAtIndex(this.filesInProcess, fileUpload);\n    removeAtIndex(this.queuedFiles, fileUpload);\n  };\n  Evaporate.prototype.resume = function (id) {\n    return typeof id === 'undefined' ? this._resumeAll() : this._resumeOne(id);\n  };\n  Evaporate.prototype._resumeAll = function () {\n    l.d('Resuming all file uploads');\n    for (var key in this.pendingFiles) {\n      if (this.pendingFiles.hasOwnProperty(key)) {\n        var file = this.pendingFiles[key];\n        if (PAUSED_STATUSES.indexOf(file.status) > -1)  {\n          this.resumeFile(file);\n        }\n      }\n    }\n    return Promise.resolve();\n  };\n  Evaporate.prototype._resumeOne = function (id) {\n    var file = this.pendingFiles[id],\n        promises = [];\n    if (typeof file === 'undefined') {\n      promises.push(Promise.reject('Cannot pause a file that does not exist.'));\n    } else if (PAUSED_STATUSES.indexOf(file.status) === -1) {\n      promises.push(Promise.reject('Cannot resume a file that has not been paused.'));\n    } else {\n      this.resumeFile(file);\n    }\n    return Promise.all(promises);\n  };\n  Evaporate.prototype.resumeFile = function (fileUpload) {\n    fileUpload.resume();\n    this.queueFile(fileUpload);\n  };\n  Evaporate.prototype.forceRetry = function () {};\n  Evaporate.prototype.consumeRemainingSlots = function () {\n    var avail = this.config.maxConcurrentParts - this.evaporatingCount;\n    if (!avail) { return; }\n    for (var i = 0; i < this.filesInProcess.length; i++) {\n      var file = this.filesInProcess[i];\n      var consumed = file.consumeSlots();\n      if (consumed < 0) { continue; }\n      avail -= consumed;\n      if (!avail) { return; }\n    }\n  };\n  Evaporate.prototype.validateEvaporateOptions = function () {\n    this.supported = !(\n    typeof File === 'undefined' ||\n    typeof Promise === 'undefined');\n\n    if (!this.supported) {\n      return 'Evaporate requires support for File and Promise';\n    }\n\n    if (this.config.readableStreams) {\n      if (typeof this.config.readableStreamPartMethod !== 'function') {\n        return \"Option readableStreamPartMethod is required when readableStreams is set.\"\n      }\n    } else  {\n      if (typeof Blob === 'undefined' || typeof (\n          Blob.prototype.webkitSlice ||\n          Blob.prototype.mozSlice ||\n          Blob.prototype.slice) === 'undefined') {\n        return 'Evaporate requires support for Blob [webkitSlice || mozSlice || slice]';\n      }\n    }\n\n    if (!this.config.signerUrl && typeof this.config.customAuthMethod !== 'function') {\n      return \"Option signerUrl is required unless customAuthMethod is present.\";\n    }\n\n    if (!this.config.bucket) {\n      return \"The AWS 'bucket' option must be present.\";\n    }\n\n    if (this.config.computeContentMd5) {\n      this.supported = typeof FileReader.prototype.readAsArrayBuffer !== 'undefined';\n      if (!this.supported) {\n        return 'The browser\\'s FileReader object does not support readAsArrayBuffer';\n      }\n\n      if (typeof this.config.cryptoMd5Method !== 'function') {\n        return 'Option computeContentMd5 has been set but cryptoMd5Method is not defined.'\n      }\n\n      if (this.config.awsSignatureVersion === '4') {\n        if (typeof this.config.cryptoHexEncodedHash256 !== 'function') {\n          return 'Option awsSignatureVersion is 4 but cryptoHexEncodedHash256 is not defined.';\n        }\n      }\n    } else if (this.config.awsSignatureVersion === '4') {\n      return 'Option awsSignatureVersion is 4 but computeContentMd5 is not enabled.';\n    }\n    return true;\n  };\n  Evaporate.prototype.evaporatingCnt = function (incr) {\n    this.evaporatingCount = Math.max(0, this.evaporatingCount + incr);\n    this.config.evaporateChanged(this, this.evaporatingCount);\n  };\n\n\n  function FileUpload(file, con, evaporate) {\n    this.fileTotalBytesUploaded = 0;\n    this.s3Parts = [];\n    this.partsOnS3 = [];\n    this.partsInProcess = [];\n    this.partsToUpload = [];\n    this.numParts = -1;\n    this.con = extend({}, con);\n    this.evaporate = evaporate;\n    this.localTimeOffset = evaporate.localTimeOffset;\n    this.deferredCompletion = defer();\n\n    extend(this, file);\n\n    this.id = decodeURIComponent(this.con.bucket + '/' + this.name);\n\n    this.signParams = con.signParams;\n  }\n  FileUpload.prototype.con = undefined;\n  FileUpload.prototype.evaporate = undefined;\n  FileUpload.prototype.localTimeOffset = 0;\n  FileUpload.prototype.id = undefined;\n  FileUpload.prototype.status = PENDING;\n  FileUpload.prototype.numParts = -1;\n  FileUpload.prototype.fileTotalBytesUploaded = 0;\n  FileUpload.prototype.partsInProcess = [];\n  FileUpload.prototype.partsToUpload = [];\n  FileUpload.prototype.s3Parts = [];\n  FileUpload.prototype.partsOnS3 = [];\n  FileUpload.prototype.deferredCompletion = undefined;\n  FileUpload.prototype.abortedByUser = false;\n\n  // Progress and Stats\n  FileUpload.prototype.progressInterval = undefined;\n  FileUpload.prototype.startTime = undefined;\n  FileUpload.prototype.loaded = 0;\n  FileUpload.prototype.totalUploaded = 0;\n  FileUpload.prototype.updateLoaded = function (loadedNow) {\n    this.loaded += loadedNow;\n    this.fileTotalBytesUploaded += loadedNow;\n  };\n  FileUpload.prototype.progessStats = function () {\n    // Adapted from https://github.com/fkjaekel\n    // https://github.com/TTLabs/EvaporateJS/issues/13\n    if (this.fileTotalBytesUploaded === 0) {\n      return {\n        speed: 0,\n        readableSpeed: \"\",\n        loaded: 0,\n        totalUploaded: 0,\n        remainingSize: this.sizeBytes,\n        secondsLeft: -1,\n        fileSize: this.sizeBytes,\n      };\n    }\n\n    this.totalUploaded += this.loaded;\n    var delta = (new Date() - this.startTime) / 1000,\n        avgSpeed = this.totalUploaded / delta,\n        remainingSize = this.sizeBytes - this.fileTotalBytesUploaded,\n        stats = {\n          speed: avgSpeed,\n          readableSpeed: readableFileSize(avgSpeed),\n          loaded: this.loaded,\n          totalUploaded: this.fileTotalBytesUploaded,\n          remainingSize: remainingSize,\n          secondsLeft: -1,\n          fileSize: this.sizeBytes,\n\n        };\n\n    if (avgSpeed > 0) {\n      stats.secondsLeft = Math.round(remainingSize / avgSpeed);\n    }\n\n    return stats;\n  };\n  FileUpload.prototype.onProgress = function () {\n    if ([ABORTED, PAUSED].indexOf(this.status) === -1) {\n      this.progress(this.fileTotalBytesUploaded / this.sizeBytes, this.progessStats());\n      this.loaded = 0;\n    }\n  };\n  FileUpload.prototype.startMonitor = function () {\n    clearInterval(this.progressInterval);\n    this.startTime = new Date();\n    this.loaded = 0;\n    this.totalUploaded = 0;\n    this.onProgress();\n    this.progressInterval = setInterval(this.onProgress.bind(this), this.con.progressIntervalMS);\n  };\n  FileUpload.prototype.stopMonitor = function () {\n    clearInterval(this.progressInterval);\n  };\n\n  // Evaporate proxies\n  FileUpload.prototype.startNextFile = function (reason) {\n    this.evaporate.startNextFile(reason);\n  };\n  FileUpload.prototype.evaporatingCnt = function (incr) {\n    this.evaporate.evaporatingCnt(incr);\n  };\n  FileUpload.prototype.consumeRemainingSlots = function () {\n    this.evaporate.consumeRemainingSlots();\n  };\n  FileUpload.prototype.getRemainingSlots = function () {\n    var evapCount = this.evaporate.evaporatingCount;\n    if (!this.partsInProcess.length && evapCount > 0) {\n      // we can use our file slot\n      evapCount -= 1;\n    }\n    return this.con.maxConcurrentParts - evapCount;\n  };\n\n  FileUpload.prototype.lastPartSatisfied = Promise.resolve('onStart');\n\n  FileUpload.prototype.start = function () {\n    this.status = EVAPORATING;\n    this.startMonitor();\n    this.started(this.id);\n\n    if (this.uploadId) {\n      l.d('resuming FileUpload ', this.id);\n      return this.consumeSlots();\n    }\n\n    var awsKey = this.name;\n\n    this.getUnfinishedFileUpload();\n\n    var existenceOptimized = this.con.computeContentMd5 &&\n            this.con.allowS3ExistenceOptimization &&\n            typeof this.firstMd5Digest !== 'undefined' &&\n            typeof this.eTag !== 'undefined';\n\n        if (this.uploadId) {\n          if (existenceOptimized) {\n            return this.reuseS3Object(awsKey)\n                .then(this.deferredCompletion.resolve)\n                .catch(this.uploadFileFromScratch.bind(this));\n          }\n\n          this.resumeInterruptedUpload()\n              .then(this._uploadComplete.bind(this))\n              .catch(this.uploadFileFromScratch.bind(this));\n        } else {\n          this.uploadFileFromScratch(\"\");\n        }\n  };\n  FileUpload.prototype.uploadFileFromScratch = function (reason) {\n    if (ACTIVE_STATUSES.indexOf(this.status) === -1) { return; }\n    l.d(reason);\n    this.uploadId = undefined;\n    return this.uploadFile(this.name)\n        .then(this._uploadComplete.bind(this))\n        .catch(this._abortUpload.bind(this));\n  };\n  FileUpload.prototype._uploadComplete = function () {\n    this.completeUpload().then(this.deferredCompletion.resolve);\n  };\n  FileUpload.prototype.stop = function () {\n    l.d('stopping FileUpload ', this.id);\n    this.setStatus(CANCELED);\n    this.info('Canceling uploads...');\n    this.abortedByUser = true;\n    var self = this;\n    return this.abortUpload()\n        .then(function () {\n          throw(\"User aborted the upload\");\n        })\n        .catch(function (reason) {\n          self.deferredCompletion.reject(reason);\n        });\n  };\n  FileUpload.prototype.pause = function (force) {\n    l.d('pausing FileUpload, force:', !!force, this.id);\n    var promises = [];\n    this.info('Pausing uploads...');\n    this.status = PAUSING;\n    if (force) {\n      this.abortParts(true);\n    } else {\n      promises = this.partsInProcess.map(function (p) {\n        return this.s3Parts[p].awsRequest.awsDeferred.promise\n      }, this);\n      this.pausing();\n    }\n    return Promise.all(promises)\n        .then(function () {\n          this.stopMonitor();\n          this.status = PAUSED;\n          this.startNextFile('pause');\n          this.paused();\n        }.bind(this));\n  };\n  FileUpload.prototype.resume = function () {\n    this.status = PENDING;\n    this.resumed();\n  };\n  FileUpload.prototype.done = function () {\n    clearInterval(this.progressInterval);\n    this.startNextFile('file done');\n    this.partsOnS3 = [];\n    this.s3Parts = [];\n  };\n  FileUpload.prototype._startCompleteUpload = function (callComplete) {\n    return function () {\n      var promise = callComplete ? this.completeUpload() : Promise.resolve();\n      promise.then(this.deferredCompletion.resolve.bind(this));\n    }\n  };\n  FileUpload.prototype._abortUpload = function () {\n    if (!this.abortedByUser) {\n      var self = this;\n      this.abortUpload()\n          .then(\n              function () { self.deferredCompletion.reject('File upload aborted due to a part failing to upload'); },\n              this.deferredCompletion.reject.bind(this));\n    }\n  };\n\n  FileUpload.prototype.abortParts = function (pause) {\n    var self = this;\n    var toAbort = this.partsInProcess.slice(0);\n    toAbort.forEach(function (i) {\n      var s3Part = self.s3Parts[i];\n      if (s3Part) {\n        s3Part.awsRequest.abort();\n        if (pause) { s3Part.status = PENDING; }\n        removeAtIndex(self.partsInProcess, s3Part.partNumber);\n        if (self.partsToUpload.length) { self.evaporatingCnt(-1); }\n      }\n    });\n  };\n  FileUpload.prototype.makeParts = function (firstPart) {\n    this.numParts = Math.ceil(this.sizeBytes / this.con.partSize) || 1; // issue #58\n    var partsDeferredPromises = [];\n\n    var self = this;\n\n    function cleanUpAfterPart(s3Part) {\n      removeAtIndex(self.partsToUpload, s3Part.partNumber);\n      removeAtIndex(self.partsInProcess, s3Part.partNumber);\n\n      if (self.partsToUpload.length) { self.evaporatingCnt(-1); }\n    }\n\n    function resolve(s3Part) { return function () {\n      cleanUpAfterPart(s3Part);\n      if (self.partsToUpload.length) { self.consumeRemainingSlots(); }\n      if (self.partsToUpload.length < self.con.maxConcurrentParts) {\n        self.startNextFile('part resolve');\n      }\n    };\n    }\n    function reject(s3Part) { return function () {\n      cleanUpAfterPart(s3Part);\n    };\n    }\n\n    var limit = firstPart ? 1 : this.numParts;\n\n    for (var part = 1; part <= limit; part++) {\n      var s3Part = this.s3Parts[part];\n      if (typeof s3Part !== \"undefined\"){\n        if(s3Part.status === COMPLETE) { continue; }\n      } else {\n        s3Part = this.makePart(part, PENDING, this.sizeBytes);\n      }\n      s3Part.awsRequest = new PutPart(this, s3Part);\n      s3Part.awsRequest.awsDeferred.promise\n          .then(resolve(s3Part), reject(s3Part));\n\n      this.partsToUpload.push(part);\n      partsDeferredPromises.push(this.s3Parts[part].awsRequest.awsDeferred.promise);\n    }\n\n    return partsDeferredPromises;\n  };\n  FileUpload.prototype.makePart = function (partNumber, status, size) {\n    var s3Part = {\n      status: status,\n      loadedBytes: 0,\n      loadedBytesPrevious: null,\n      isEmpty: (size === 0), // issue #58\n      md5_digest: null,\n      partNumber: partNumber\n    };\n\n    this.s3Parts[partNumber] = s3Part;\n\n    return s3Part;\n  };\n  FileUpload.prototype.setStatus = function (s) {\n    this.status = s;\n  };\n\n  FileUpload.prototype.createUploadFile = function () {\n    if (this.status === ABORTED) { return; }\n    var fileKey = uploadKey(this),\n        newUpload = {\n          awsKey: this.name,\n          bucket: this.con.bucket,\n          uploadId: this.uploadId,\n          fileSize: this.sizeBytes,\n          fileType: this.file.type,\n          lastModifiedDate: dateISOString(this.file.lastModified),\n          partSize: this.con.partSize,\n          signParams: this.con.signParams,\n          createdAt: new Date().toISOString()\n        };\n    saveUpload(fileKey, newUpload);\n  };\n  FileUpload.prototype.updateUploadFile = function (updates) {\n    var fileKey = uploadKey(this),\n        uploads = getSavedUploads(),\n        upload = extend({}, uploads[fileKey], updates);\n    saveUpload(fileKey, upload);\n  };\n  FileUpload.prototype.completeUploadFile = function (xhr) {\n    var uploads = getSavedUploads(),\n        upload = uploads[uploadKey(this)];\n\n    if (typeof upload !== 'undefined') {\n      upload.completedAt = new Date().toISOString();\n      upload.eTag = this.eTag;\n      upload.firstMd5Digest = this.firstMd5Digest;\n      uploads[uploadKey(this)] = upload;\n      historyCache.setItem('awsUploads', JSON.stringify(uploads));\n    }\n\n    this.complete(xhr, this.name, this.progessStats());\n    this.setStatus(COMPLETE);\n    this.onProgress();\n  };\n  FileUpload.prototype.removeUploadFile = function (){\n    if (typeof this.file !== 'undefined') {\n      removeUpload(uploadKey(this));\n    }\n  };\n  FileUpload.prototype.getUnfinishedFileUpload = function () {\n    var savedUploads = getSavedUploads(true),\n        u = savedUploads[uploadKey(this)];\n\n    if (this.canRetryUpload(u)) {\n      this.uploadId = u.uploadId;\n      this.name = u.awsKey;\n      this.eTag = u.eTag;\n      this.firstMd5Digest = u.firstMd5Digest;\n      this.signParams = u.signParams;\n    }\n  };\n  FileUpload.prototype.canRetryUpload = function (u) {\n    // Must be the same file name, file size, last_modified, file type as previous upload\n    if (typeof u === 'undefined') {\n      return false;\n    }\n    var completedAt = new Date(u.completedAt || FAR_FUTURE);\n\n    // check that the part sizes and bucket match, and if the file name of the upload\n    // matches if onlyRetryForSameFileName is true\n    return this.con.partSize === u.partSize &&\n        completedAt > HOURS_AGO &&\n        this.con.bucket === u.bucket &&\n        (this.con.onlyRetryForSameFileName ? this.name === u.awsKey : true);\n  };\n\n  FileUpload.prototype.partSuccess = function (eTag, putRequest) {\n    var part = putRequest.part;\n    l.d(putRequest.request.step, 'ETag:', eTag);\n    if (part.isEmpty || (eTag !== ETAG_OF_0_LENGTH_BLOB)) { // issue #58\n      part.eTag = eTag;\n      part.status = COMPLETE;\n      this.partsOnS3.push(part);\n      return true;\n    } else {\n      part.status = ERROR;\n      putRequest.resetLoadedBytes();\n      var msg = ['eTag matches MD5 of 0 length blob for part #', putRequest.partNumber, 'Retrying part.'].join(\" \");\n      l.w(msg);\n      this.warn(msg);\n    }\n  };\n  FileUpload.prototype.listPartsSuccess = function (listPartsRequest, partsXml) {\n    this.info('uploadId', this.uploadId, 'is not complete. Fetching parts from part marker', listPartsRequest.partNumberMarker);\n    partsXml = partsXml.replace(/(\\r\\n|\\n|\\r)/gm, \"\"); // strip line breaks to ease the regex requirements\n    var partRegex = /<Part>(.+?)<\\/Part\\>/g;\n\n    while (true) {\n      var cp = (partRegex.exec(partsXml) || [])[1];\n      if (!cp) { break; }\n\n      var partSize = parseInt(elementText(cp, \"Size\"), 10);\n      this.fileTotalBytesUploaded += partSize;\n      this.partsOnS3.push({\n        eTag: elementText(cp, \"ETag\").replace(/&quot;/g, '\"'),\n        partNumber: parseInt(elementText(cp, \"PartNumber\"), 10),\n        size: partSize,\n        LastModified: elementText(cp, \"LastModified\")\n      });\n    }\n    return elementText(partsXml, \"IsTruncated\") === 'true' ? elementText(partsXml, \"NextPartNumberMarker\") : undefined;\n  };\n  FileUpload.prototype.makePartsfromPartsOnS3 = function () {\n    if (ACTIVE_STATUSES.indexOf(this.status) === -1) { return; }\n    this.nameChanged(this.name);\n    this.partsOnS3.forEach(function (cp) {\n      var uploadedPart = this.makePart(cp.partNumber, COMPLETE, cp.size);\n      uploadedPart.eTag = cp.eTag;\n      uploadedPart.loadedBytes = cp.size;\n      uploadedPart.loadedBytesPrevious = cp.size;\n      uploadedPart.finishedUploadingAt = cp.LastModified;\n    }.bind(this));\n  };\n  FileUpload.prototype.completeUpload = function () {\n    var self = this;\n    return new CompleteMultipartUpload(this)\n        .send()\n        .then(\n            function (xhr) {\n              self.eTag = elementText(xhr.responseText, \"ETag\").replace(/&quot;/g, '\"');\n              self.completeUploadFile(xhr);\n            });\n  };\n  FileUpload.prototype.getCompletedPayload = function () {\n    var completeDoc = [];\n    completeDoc.push('<CompleteMultipartUpload>');\n    this.s3Parts.forEach(function (part, partNumber) {\n      if (partNumber > 0) {\n        ['<Part><PartNumber>', partNumber, '</PartNumber><ETag>', part.eTag, '</ETag></Part>']\n            .forEach(function (a) { completeDoc.push(a); });\n      }\n    });\n    completeDoc.push('</CompleteMultipartUpload>');\n\n    return completeDoc.join(\"\");\n  };\n  FileUpload.prototype.consumeSlots = function () {\n    if (this.partsToUpload.length === 0) { return -1 }\n    if (this.partsToUpload.length !== this.partsInProcess.length &&\n        this.status === EVAPORATING) {\n\n      var partsToUpload = Math.min(this.getRemainingSlots(), this.partsToUpload.length);\n\n      if (!partsToUpload) { return -1; }\n\n      var satisfied = 0;\n      for (var i = 0; i < this.partsToUpload.length; i++) {\n        var s3Part = this.s3Parts[this.partsToUpload[i]];\n\n        if (s3Part.status === EVAPORATING) { continue; }\n\n        if (this.canStartPart(s3Part)) {\n          if (this.partsInProcess.length && this.partsToUpload.length > 1) {\n            this.evaporatingCnt(+1);\n          }\n          this.partsInProcess.push(s3Part.partNumber);\n          var awsRequest = s3Part.awsRequest;\n          this.lastPartSatisfied.then(awsRequest.delaySend.bind(awsRequest));\n          this.lastPartSatisfied = awsRequest.getStartedPromise();\n        } else { continue; }\n\n        satisfied += 1;\n\n        if (satisfied === partsToUpload) { break; }\n\n      }\n      var allInProcess = this.partsToUpload.length === this.partsInProcess.length,\n          remainingSlots = this.getRemainingSlots();\n      if (allInProcess && remainingSlots > 0) {\n        // We don't need any more slots...\n        this.startNextFile('consume slots');\n      }\n      return remainingSlots;\n    }\n    return 0;\n  };\n  FileUpload.prototype.canStartPart = function (part) {\n    return this.partsInProcess.indexOf(part.partNumber) === -1 && !part.awsRequest.errorExceptionStatus();\n  };\n  FileUpload.prototype.uploadFile = function (awsKey) {\n    this.removeUploadFile();\n    var self = this;\n    return new InitiateMultipartUpload(self, awsKey)\n        .send()\n        .then(\n            function () {\n              self.uploadInitiated(self.uploadId);\n              self.partsToUpload = [];\n              return self.uploadParts()\n                  .then(\n                      function () {},\n                      function (reason) {\n                        throw(reason);\n                      })\n            });\n  };\n  FileUpload.prototype.uploadParts = function () {\n    this.loaded = 0;\n    this.totalUploaded = 0;\n    if (ACTIVE_STATUSES.indexOf(this.status) === -1) {\n      return Promise.reject('Part uploading stopped because the file was canceled');\n    }\n    var promises = this.makeParts();\n    this.setStatus(EVAPORATING);\n    this.startTime = new Date();\n    this.consumeSlots();\n    return Promise.all(promises);\n  };\n  FileUpload.prototype.abortUpload = function () {\n    return new Promise(function (resolve, reject) {\n\n      if(typeof this.uploadId === 'undefined') {\n        resolve();\n        return;\n      }\n\n      new DeleteMultipartUpload(this)\n          .send()\n          .then(resolve, reject);\n    }.bind(this))\n        .then(\n            function () {\n              this.setStatus(ABORTED);\n              this.cancelled();\n              this.removeUploadFile();\n            }.bind(this),\n            this.deferredCompletion.reject.bind(this));\n  };\n  FileUpload.prototype.resumeInterruptedUpload = function () {\n    return new ResumeInterruptedUpload(this)\n        .send()\n        .then(this.uploadParts.bind(this));\n  };\n  FileUpload.prototype.reuseS3Object = function (awsKey) {\n    var self = this;\n    // Attempt to reuse entire uploaded object on S3\n    this.makeParts(1);\n    this.partsToUpload = [];\n    var firstS3Part = this.s3Parts[1];\n    function reject(reason) {\n      self.name = awsKey;\n      throw(reason);\n    }\n    return firstS3Part.awsRequest.getPartMd5Digest()\n        .then(function () {\n          if (self.firstMd5Digest === firstS3Part.md5_digest) {\n            return new ReuseS3Object(self, awsKey)\n                .send()\n                .then(\n                    function (xhr) {\n                      l.d('headObject found matching object on S3.');\n                      self.completeUploadFile(xhr);\n                      self.nameChanged(self.name);\n                    })\n                .catch(reject);\n\n          } else {\n            var msg = self.con.allowS3ExistenceOptimization ? 'File\\'s first part MD5 digest does not match what was stored.' : 'allowS3ExistenceOptimization is not enabled.';\n            reject(msg);\n          }\n        });\n  };\n\n\n  function SignedS3AWSRequest(fileUpload, request) {\n    this.fileUpload = fileUpload;\n    this.con = fileUpload.con;\n    this.attempts = 1;\n    this.localTimeOffset = this.fileUpload.localTimeOffset;\n    this.awsDeferred = defer();\n    this.started = defer();\n\n    this.awsUrl = awsUrl(this.con);\n    this.awsHost = uri(this.awsUrl).hostname;\n\n    var r = extend({}, request);\n    if (fileUpload.contentType) {\n      r.contentType = fileUpload.contentType;\n    }\n\n    this.updateRequest(r);\n  }\n  SignedS3AWSRequest.prototype.fileUpload = undefined;\n  SignedS3AWSRequest.prototype.con = undefined;\n  SignedS3AWSRequest.prototype.awsUrl = undefined;\n  SignedS3AWSRequest.prototype.awsHost = undefined;\n  SignedS3AWSRequest.prototype.authorize = function () {};\n  SignedS3AWSRequest.prototype.localTimeOffset = 0;\n  SignedS3AWSRequest.prototype.awsDeferred = undefined;\n  SignedS3AWSRequest.prototype.started = undefined;\n  SignedS3AWSRequest.prototype.getPath = function () {\n    var path = '/' + this.con.bucket + '/' + this.fileUpload.name;\n    if (this.con.cloudfront || this.awsUrl.indexOf('cloudfront') > -1) {\n      path = '/' + this.fileUpload.name;\n    }\n    return path;\n  };\n\n  SignedS3AWSRequest.prototype.updateRequest = function (request) {\n    this.request = request;\n    var SigningClass = signingVersion(this, l);\n    this.signer = new SigningClass(request);\n  };\n  SignedS3AWSRequest.prototype.success = function () { this.awsDeferred.resolve(this.currentXhr); };\n  SignedS3AWSRequest.prototype.backOffWait = function () {\n    return (this.attempts === 1) ? 0 : 1000 * Math.min(\n            this.con.maxRetryBackoffSecs,\n            Math.pow(this.con.retryBackoffPower, this.attempts - 2)\n        );\n  };\n  SignedS3AWSRequest.prototype.error =  function (reason) {\n    if (this.errorExceptionStatus()) {\n      return;\n    }\n\n    this.signer.error();\n    l.d(this.request.step, 'error:', this.fileUpload.id, reason);\n\n    if (typeof this.errorHandler(reason) !== 'undefined' ) {\n      return;\n    }\n\n    this.fileUpload.warn('Error in ', this.request.step, reason);\n    this.fileUpload.setStatus(ERROR);\n\n    var self = this,\n        backOffWait = this.backOffWait();\n    this.attempts += 1;\n\n    setTimeout(function () {\n      if (!self.errorExceptionStatus()) { self.trySend(); }\n    }, backOffWait);\n  };\n  SignedS3AWSRequest.prototype.errorHandler = function () { };\n  SignedS3AWSRequest.prototype.errorExceptionStatus = function () { return false; };\n  SignedS3AWSRequest.prototype.getPayload = function () { return Promise.resolve(null); };\n  SignedS3AWSRequest.prototype.success_status = function (xhr) {\n    return (xhr.status >= 200 && xhr.status <= 299) ||\n        this.request.success404 && xhr.status === 404;\n  };\n  SignedS3AWSRequest.prototype.stringToSign = function () {\n    return encodeURIComponent(this.signer.stringToSign());\n  };\n  SignedS3AWSRequest.prototype.canonicalRequest = function () {\n    return this.signer.canonicalRequest();\n  }\n  SignedS3AWSRequest.prototype.signResponse = function(payload, stringToSign, signatureDateTime) {\n    var self = this;\n    return new Promise(function (resolve) {\n      if (typeof self.con.signResponseHandler === 'function') {\n        return self.con.signResponseHandler(payload, stringToSign, signatureDateTime)\n            .then(resolve);\n      }\n      resolve(payload);\n    });\n  };\n  SignedS3AWSRequest.prototype.sendRequestToAWS = function () {\n    var self = this;\n    return new Promise( function (resolve, reject) {\n      var xhr = new XMLHttpRequest();\n      self.currentXhr = xhr;\n\n      var url = [self.awsUrl, self.getPath(), self.request.path].join(\"\"),\n          all_headers = {};\n\n      if (self.request.query_string) {\n        url += self.request.query_string;\n      }\n      extend(all_headers, self.request.not_signed_headers);\n      extend(all_headers, self.request.x_amz_headers);\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n\n          if (self.success_status(xhr)) {\n            if (self.request.response_match &&\n                xhr.response.match(new RegExp(self.request.response_match)) === undefined) {\n              reject('AWS response does not match set pattern: ' + self.request.response_match);\n            } else {\n              resolve();\n            }\n          } else {\n            var reason = xhr.responseText ? getAwsResponse(xhr) : ' ';\n            reason += 'status:' + xhr.status;\n            reject(reason);\n          }\n        }\n      };\n\n      xhr.open(self.request.method, url);\n      xhr.setRequestHeader('Authorization', self.signer.authorizationString());\n\n      for (var key in all_headers) {\n        if (all_headers.hasOwnProperty(key)) {\n          xhr.setRequestHeader(key, all_headers[key]);\n        }\n      }\n\n      self.signer.setHeaders(xhr);\n\n      if (self.request.contentType) {\n        xhr.setRequestHeader('Content-Type', self.request.contentType);\n      }\n\n      if (self.request.md5_digest) {\n        xhr.setRequestHeader('Content-MD5', self.request.md5_digest);\n      }\n      xhr.onerror = function (xhr) {\n        var reason = xhr.responseText ? getAwsResponse(xhr) : 'transport error';\n        reject(reason);\n      };\n\n      if (typeof self.request.onProgress === 'function') {\n        xhr.upload.onprogress = self.request.onProgress;\n      }\n\n      self.getPayload()\n          .then(xhr.send.bind(xhr), reject);\n\n      setTimeout(function () { // We have to delay here or Safari will hang\n        self.started.resolve('request sent ' + self.request.step);\n      }, 20);\n      self.signer.payload = null;\n      self.payloadPromise = undefined;\n    });\n  };\n  //see: http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#ConstructingTheAuthenticationHeader\n  SignedS3AWSRequest.prototype.authorize = function () {\n    this.request.dateString = this.signer.dateString(this.localTimeOffset);\n    this.request.x_amz_headers = extend(this.request.x_amz_headers, {\n      'x-amz-date': this.request.dateString\n    });\n    return this.signer.getPayload()\n        .then(function () {\n          return authorizationMethod(this).authorize();\n        }.bind(this));\n  };\n  SignedS3AWSRequest.prototype.authorizationSuccess = function (authorization) {\n    l.d(this.request.step, 'signature:', authorization);\n    this.request.auth = authorization;\n  };\n  SignedS3AWSRequest.prototype.trySend = function () {\n    var self = this;\n    return this.authorize()\n        .then(\n            function (value) {\n              self.authorizationSuccess(value);\n              if (self.fileUpload.status === ABORTED) { return; }\n              self.sendRequestToAWS().then(self.success.bind(self), self.error.bind(self));\n            },\n            self.error.bind(self));\n  };\n  SignedS3AWSRequest.prototype.send = function () {\n    this.trySend();\n    return this.awsDeferred.promise;\n  };\n\n  function CancelableS3AWSRequest(fileUpload, request) {\n    SignedS3AWSRequest.call(this, fileUpload, request);\n  }\n  CancelableS3AWSRequest.prototype = Object.create(SignedS3AWSRequest.prototype);\n  CancelableS3AWSRequest.prototype.constructor = CancelableS3AWSRequest;\n  CancelableS3AWSRequest.prototype.errorExceptionStatus = function () {\n    return [ABORTED, CANCELED].indexOf(this.fileUpload.status) > -1;\n  };\n\n  function SignedS3AWSRequestWithRetryLimit(fileUpload, request, maxRetries) {\n    if (maxRetries > -1) {\n      this.maxRetries = maxRetries;\n    }\n    SignedS3AWSRequest.call(this, fileUpload, request);\n  }\n  SignedS3AWSRequestWithRetryLimit.prototype = Object.create(CancelableS3AWSRequest.prototype);\n  SignedS3AWSRequestWithRetryLimit.prototype.constructor = SignedS3AWSRequestWithRetryLimit;\n  SignedS3AWSRequestWithRetryLimit.prototype.maxRetries = 1;\n  SignedS3AWSRequestWithRetryLimit.prototype.errorHandler =  function (reason) {\n    if (this.attempts > this.maxRetries) {\n      var msg = ['MaxRetries exceeded. Will re-upload file id ', this.fileUpload.id, ', ', reason].join(\"\");\n      l.w(msg);\n      this.awsDeferred.reject(msg);\n      return true;\n    }\n  };\n  SignedS3AWSRequestWithRetryLimit.prototype.rejectedSuccess = function () {\n    var reason = Array.prototype.slice.call(arguments, 1).join(\"\");\n    this.awsDeferred.reject(reason);\n    return false;\n  };\n\n  // see: http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadInitiate.html\n  function InitiateMultipartUpload(fileUpload, awsKey) {\n    var request = {\n      method: 'POST',\n      path: '?uploads',\n      step: 'initiate',\n      x_amz_headers: fileUpload.xAmzHeadersAtInitiate,\n      not_signed_headers: fileUpload.notSignedHeadersAtInitiate,\n      response_match: '<UploadId>(.+)<\\/UploadId>'\n    };\n\n    CancelableS3AWSRequest.call(this, fileUpload, request);\n    this.awsKey = awsKey;\n  }\n  InitiateMultipartUpload.prototype = Object.create(CancelableS3AWSRequest.prototype);\n  InitiateMultipartUpload.prototype.constructor = InitiateMultipartUpload;\n  InitiateMultipartUpload.prototype.success = function () {\n    var match = this.currentXhr.response.match(new RegExp(this.request.response_match));\n    this.fileUpload.uploadId = match[1];\n    this.fileUpload.awsKey = this.awsKey;\n    l.d('InitiateMultipartUpload ID is', this.fileUpload.uploadId);\n    this.fileUpload.createUploadFile();\n    this.awsDeferred.resolve(this.currentXhr);\n  };\n\n  //http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadComplete.html\n  function CompleteMultipartUpload(fileUpload) {\n    fileUpload.info('will attempt to complete upload');\n    var request = {\n      method: 'POST',\n      contentType: 'application/xml; charset=UTF-8',\n      path: '?uploadId=' + fileUpload.uploadId,\n      x_amz_headers: fileUpload.xAmzHeadersCommon || fileUpload.xAmzHeadersAtComplete,\n      step: 'complete'\n    };\n    CancelableS3AWSRequest.call(this, fileUpload, request);\n  }\n  CompleteMultipartUpload.prototype = Object.create(CancelableS3AWSRequest.prototype);\n  CompleteMultipartUpload.prototype.constructor = CompleteMultipartUpload;\n  CompleteMultipartUpload.prototype.getPayload = function () {\n    return Promise.resolve(this.fileUpload.getCompletedPayload());\n  };\n\n  //http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadComplete.html\n  function ReuseS3Object(fileUpload, awsKey) {\n    this.awsKey = awsKey;\n\n    fileUpload.info('will attempt to verify existence of the file');\n\n    var request = {\n      method: 'HEAD',\n      path: '',\n      x_amz_headers: fileUpload.xAmzHeadersCommon,\n      success404: true,\n      step: 'head_object'\n    };\n\n    SignedS3AWSRequestWithRetryLimit.call(this, fileUpload, request);\n  }\n  ReuseS3Object.prototype = Object.create(SignedS3AWSRequestWithRetryLimit.prototype);\n  ReuseS3Object.prototype.constructor = ReuseS3Object;\n  ReuseS3Object.prototype.awsKey = undefined;\n  ReuseS3Object.prototype.success = function () {\n    var eTag = this.currentXhr.getResponseHeader('Etag');\n    if (eTag !== this.fileUpload.eTag &&\n        !this.rejectedSuccess('uploadId ', this.fileUpload.id, ' found on S3 but the Etag doesn\\'t match.')) { return; }\n    this.awsDeferred.resolve(this.currentXhr);\n  };\n\n  //http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadListParts.html\n  function ResumeInterruptedUpload(fileUpload) {\n    SignedS3AWSRequestWithRetryLimit.call(this, fileUpload);\n    this.updateRequest(this.setupRequest(0));\n  }\n  ResumeInterruptedUpload.prototype = Object.create(SignedS3AWSRequestWithRetryLimit.prototype);\n  ResumeInterruptedUpload.prototype.constructor = ResumeInterruptedUpload;\n  ResumeInterruptedUpload.prototype.awsKey = undefined;\n  ResumeInterruptedUpload.prototype.partNumberMarker = 0;\n  ResumeInterruptedUpload.prototype.setupRequest = function (partNumberMarker) {\n    var msg = ['setupRequest() for uploadId:', this.fileUpload.uploadId, 'for part marker:', partNumberMarker].join(\" \");\n    l.d(msg);\n\n    this.fileUpload.info(msg);\n\n    this.awsKey = this.fileUpload.name;\n    this.partNumberMarker = partNumberMarker;\n\n    var request = {\n      method: 'GET',\n      path: ['?uploadId=', this.fileUpload.uploadId].join(\"\"),\n      query_string: \"&part-number-marker=\" + partNumberMarker,\n      x_amz_headers: this.fileUpload.xAmzHeadersCommon,\n      step: 'get upload parts',\n      success404: true\n    };\n\n    this.request = request;\n    return request;\n  };\n  ResumeInterruptedUpload.prototype.success = function () {\n    if (this.currentXhr.status === 404) {\n      // Success! Upload is no longer recognized, so there is nothing to fetch\n      if (this.rejectedSuccess('uploadId ', this.fileUpload.id, ' not found on S3.')) { this.awsDeferred.resolve(this.currentXhr); }\n      return;\n    }\n\n    var nextPartNumber = this.fileUpload.listPartsSuccess(this, this.currentXhr.responseText);\n    if (nextPartNumber) {\n      var request = this.setupRequest(nextPartNumber); // let's fetch the next set of parts\n      this.updateRequest(request);\n      this.trySend();\n    } else {\n      this.fileUpload.makePartsfromPartsOnS3();\n      this.awsDeferred.resolve(this.currentXhr);\n    }\n  };\n\n  //http://docs.aws.amazon.com/AmazonS3/latest/API/mpUploadUploadPart.html\n  function PutPart(fileUpload, part) {\n    this.part = part;\n\n    this.partNumber = part.partNumber;\n    this.start = (this.partNumber - 1) * fileUpload.con.partSize;\n    this.end = Math.min(this.partNumber * fileUpload.con.partSize, fileUpload.sizeBytes);\n\n    var request = {\n      method: 'PUT',\n      path: '?partNumber=' + this.partNumber + '&uploadId=' + fileUpload.uploadId,\n      step: 'upload #' + this.partNumber,\n      x_amz_headers: fileUpload.xAmzHeadersCommon || fileUpload.xAmzHeadersAtUpload,\n      contentSha256: \"UNSIGNED-PAYLOAD\",\n      onProgress: this.onProgress.bind(this)\n    };\n\n    SignedS3AWSRequest.call(this, fileUpload, request);\n  }\n  PutPart.prototype = Object.create(SignedS3AWSRequest.prototype);\n  PutPart.prototype.constructor = PutPart;\n  PutPart.prototype.part = 1;\n  PutPart.prototype.payloadPromise = undefined;\n  PutPart.prototype.start = 0;\n  PutPart.prototype.end = 0;\n  PutPart.prototype.partNumber = undefined;\n  PutPart.prototype.getPartMd5Digest = function () {\n    var self = this,\n        part = this.part;\n    return new Promise(function (resolve, reject) {\n      if (self.con.computeContentMd5 && !part.md5_digest) {\n        self.getPayload()\n            .then(function (data) {\n              var md5_digest = self.con.cryptoMd5Method(data);\n              if (self.partNumber === 1 && self.con.computeContentMd5 && typeof self.fileUpload.firstMd5Digest === \"undefined\") {\n                self.fileUpload.firstMd5Digest = md5_digest;\n                self.fileUpload.updateUploadFile({firstMd5Digest: md5_digest})\n              }\n              resolve(md5_digest);\n            }, reject);\n      } else {\n        resolve(part.md5_digest);\n      }\n    }).then(function (md5_digest) {\n      if (md5_digest) {\n        l.d(self.request.step, 'MD5 digest:', md5_digest);\n        self.request.md5_digest = md5_digest;\n        self.part.md5_digest = md5_digest;\n      }\n    });\n  };\n  PutPart.prototype.sendRequestToAWS = function () {\n    this.stalledInterval = setInterval(this.stalledPartMonitor(), PARTS_MONITOR_INTERVAL_MS);\n    this.stalledPartMonitor();\n    return SignedS3AWSRequest.prototype.sendRequestToAWS.call(this);\n  };\n  PutPart.prototype.send = function () {\n    if (this.part.status !== COMPLETE &&\n        [ABORTED, PAUSED, CANCELED].indexOf(this.fileUpload.status) === -1\n    ) {\n      l.d('uploadPart #', this.partNumber, this.attempts === 1 ? 'submitting' : 'retrying');\n\n      this.part.status = EVAPORATING;\n      this.attempts += 1;\n      this.part.loadedBytesPrevious = null;\n\n      var self = this;\n      return this.getPartMd5Digest()\n          .then(function () {\n            l.d('Sending', self.request.step);\n            SignedS3AWSRequest.prototype.send.call(self);\n          });\n    }\n  };\n  PutPart.prototype.success = function () {\n    clearInterval(this.stalledInterval);\n    var eTag = this.currentXhr.getResponseHeader('ETag');\n    this.currentXhr = null;\n    if (this.fileUpload.partSuccess(eTag, this)) { this.awsDeferred.resolve(this.currentXhr); }\n  };\n  PutPart.prototype.onProgress = function (evt) {\n    if (evt.loaded > 0) {\n      var loadedNow = evt.loaded - this.part.loadedBytes;\n      if (loadedNow) {\n        this.part.loadedBytes = evt.loaded;\n        this.fileUpload.updateLoaded(loadedNow);\n      }\n    }\n  };\n  PutPart.prototype.stalledPartMonitor = function () {\n    var lastLoaded = this.part.loadedBytes;\n    var self = this;\n    return function () {\n      clearInterval(self.stalledInterval);\n      if ([EVAPORATING, ERROR, PAUSING, PAUSED].indexOf(self.fileUpload.status) === -1 &&\n          self.part.status !== ABORTED &&\n          self.part.loadedBytes < this.size) {\n        if (lastLoaded === self.part.loadedBytes) {\n          l.w('Part stalled. Will abort and retry:', self.partNumber, decodeURIComponent(self.fileUpload.name));\n          self.abort();\n          if (!self.errorExceptionStatus()) {\n            self.delaySend();\n          }\n        } else {\n          self.stalledInterval = setInterval(self.stalledPartMonitor(), PARTS_MONITOR_INTERVAL_MS);\n        }\n      }\n    }\n  };\n  PutPart.prototype.resetLoadedBytes = function () {\n    this.fileUpload.updateLoaded(-this.part.loadedBytes);\n    this.part.loadedBytes = 0;\n    this.fileUpload.onProgress();\n  };\n  PutPart.prototype.errorExceptionStatus = function () {\n    return [CANCELED, ABORTED, PAUSED, PAUSING].indexOf(this.fileUpload.status) > -1;\n  };\n  PutPart.prototype.delaySend = function () {\n    var backOffWait = this.backOffWait();\n    this.attempts += 1;\n    setTimeout(this.send.bind(this), backOffWait);\n  };\n  PutPart.prototype.errorHandler = function (reason) {\n    clearInterval(this.stalledInterval);\n    if (reason.match(/status:404/)) {\n      var errMsg = '404 error on part PUT. The part and the file will abort. ' + reason;\n      l.w(errMsg);\n      this.fileUpload.error(errMsg);\n      this.part.status = ABORTED;\n      this.awsDeferred.reject(errMsg);\n      return true;\n    }\n    this.resetLoadedBytes();\n    this.part.status = ERROR;\n\n    if (!this.errorExceptionStatus()) {\n      this.delaySend();\n    }\n    return true;\n  };\n  PutPart.prototype.abort = function () {\n    if (this.currentXhr) {\n      this.currentXhr.abort();\n    }\n    this.resetLoadedBytes();\n    this.attempts = 1;\n  };\n  PutPart.size = 0;\n  PutPart.prototype.streamToArrayBuffer = function (stream) {\n    return new Promise(function (resolve, reject) {\n      // stream is empty or ended\n      if (!stream.readable) { return resolve([]); }\n\n      var arr = new Uint8Array(Math.min(this.con.partSize, this.end - this.start)),\n          i = 0;\n      stream.on('data', onData);\n      stream.on('end', onEnd);\n      stream.on('error', onEnd);\n      stream.on('close', onClose);\n\n      function onData(data) {\n        if (data.byteLength === 1) { return; }\n        arr.set(data, i);\n        i += data.byteLength;\n      }\n\n      function onEnd(err) {\n        if (err) { reject(err); }\n        else { resolve(arr); }\n        cleanup();\n      }\n\n      function onClose() {\n        resolve(arr);\n        cleanup();\n      }\n\n      function cleanup() {\n        arr = null;\n        stream.removeListener('data', onData);\n        stream.removeListener('end', onEnd);\n        stream.removeListener('error', onEnd);\n        stream.removeListener('close', onClose);\n      }\n    }.bind(this));\n  };\n  PutPart.prototype.getPayload = function () {\n    if (typeof this.payloadPromise === 'undefined') {\n      this.payloadPromise = this.con.readableStreams ? this.payloadFromStream() : this.payloadFromBlob();\n    }\n    return this.payloadPromise;\n  };\n  PutPart.prototype.payloadFromStream = function () {\n    var stream = this.con.readableStreamPartMethod(this.fileUpload.file, this.start, this.end - 1);\n    return new Promise(function (resolve, reject) {\n      var streamPromise = this.streamToArrayBuffer(stream);\n      streamPromise.then(function (data) {\n        resolve(data);\n      }.bind(this), reject);\n    }.bind(this));\n  };\n  PutPart.prototype.payloadFromBlob = function () {\n    // browsers' implementation of the Blob.slice function has been renamed a couple of times, and the meaning of the\n    // 2nd parameter changed. For example Gecko went from slice(start,length) -> mozSlice(start, end) -> slice(start, end).\n    // As of 12/12/12, it seems that the unified 'slice' is the best bet, hence it being first in the list. See\n    // https://developer.mozilla.org/en-US/docs/DOM/Blob for more info.\n    var file = this.fileUpload.file,\n        slicerFn = (file.slice ? 'slice' : (file.mozSlice ? 'mozSlice' : 'webkitSlice')),\n        blob = file[slicerFn](this.start, this.end);\n    if (this.con.computeContentMd5) {\n      return new Promise(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          var buffer = this.result && typeof this.result.buffer !== 'undefined',\n              result = buffer ? new Uint8Array(this.result.buffer) : this.result;\n          resolve(result);\n        };\n        reader.readAsArrayBuffer(blob);\n      });\n    }\n    return Promise.resolve(blob);\n  };\n  PutPart.prototype.stalledInterval = -1;\n  PutPart.prototype.getStartedPromise = function () {\n    return this.started.promise;\n  };\n\n\n  //http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadAbort.html\n  function DeleteMultipartUpload(fileUpload) {\n    fileUpload.info('will attempt to abort the upload');\n\n    fileUpload.abortParts();\n\n    var request = {\n      method: 'DELETE',\n      path: '?uploadId=' + fileUpload.uploadId,\n      x_amz_headers: fileUpload.xAmzHeadersCommon,\n      success404: true,\n      step: 'abort'\n    };\n\n    SignedS3AWSRequest.call(this, fileUpload, request);\n  }\n  DeleteMultipartUpload.prototype = Object.create(SignedS3AWSRequest.prototype);\n  DeleteMultipartUpload.prototype.constructor = DeleteMultipartUpload;\n  DeleteMultipartUpload.prototype.maxRetries = 1;\n  DeleteMultipartUpload.prototype.success = function () {\n    this.fileUpload.setStatus(ABORTED);\n    this.awsDeferred.resolve(this.currentXhr);\n  };\n  DeleteMultipartUpload.prototype.errorHandler =  function (reason) {\n    if (this.attempts > this.maxRetries) {\n      var msg = 'Error aborting upload, Exceeded retries deleting the file upload: ' + reason;\n      l.w(msg);\n      this.fileUpload.error(msg);\n      this.awsDeferred.reject(msg);\n      return true;\n    }\n  };\n\n  function signingVersion(awsRequest, l) {\n    var con = awsRequest.con;\n    function AwsSignature(request) {\n      this.request = request;\n    }\n    AwsSignature.prototype.request = {};\n    AwsSignature.prototype.error = function () {};\n    AwsSignature.prototype.authorizationString = function () {};\n    AwsSignature.prototype.stringToSign = function () {};\n    AwsSignature.prototype.canonicalRequest = function () {};\n    AwsSignature.prototype.setHeaders = function () {};\n    AwsSignature.prototype.datetime = function (timeOffset) {\n      return new Date(new Date().getTime() + timeOffset);\n\n    };\n    AwsSignature.prototype.dateString = function (timeOffset) {\n      return this.datetime(timeOffset).toISOString().slice(0, 19).replace(/-|:/g, '') + \"Z\";\n    };\n\n    function AwsSignatureV2(request) {\n      AwsSignature.call(this, request);\n    }\n    AwsSignatureV2.prototype = Object.create(AwsSignature.prototype);\n    AwsSignatureV2.prototype.constructor = AwsSignatureV2;\n    AwsSignatureV2.prototype.authorizationString = function () {\n      return ['AWS ', con.aws_key, ':', this.request.auth].join('');\n    };\n    AwsSignatureV2.prototype.stringToSign = function () {\n      var x_amz_headers = '', result, header_key_array = [];\n\n      for (var key in this.request.x_amz_headers) {\n        if (this.request.x_amz_headers.hasOwnProperty(key)) {\n          header_key_array.push(key);\n        }\n      }\n      header_key_array.sort();\n\n      header_key_array.forEach(function (header_key) {\n        x_amz_headers += (header_key + ':' + this.request.x_amz_headers[header_key] + '\\n');\n      }.bind(this));\n\n      result = this.request.method + '\\n' +\n          (this.request.md5_digest || '') + '\\n' +\n          (this.request.contentType || '') + '\\n' +\n          '\\n' +\n          x_amz_headers +\n          (con.cloudfront ? '/' + con.bucket : '') +\n          awsRequest.getPath() + this.request.path;\n\n      l.d('V2 stringToSign:', result);\n      return result;\n\n    };\n    AwsSignatureV2.prototype.dateString = function (timeOffset) {\n      return this.datetime(timeOffset).toUTCString();\n    };\n    AwsSignatureV2.prototype.getPayload = function () { return Promise.resolve(); };\n\n    function AwsSignatureV4(request) {\n      this._cr = undefined\n      AwsSignature.call(this, request);\n    }\n    AwsSignatureV4.prototype = Object.create(AwsSignature.prototype);\n    AwsSignatureV4.prototype.constructor = AwsSignatureV4;\n    AwsSignatureV4.prototype._cr = undefined;\n    AwsSignatureV4.prototype.payload = null;\n    AwsSignatureV4.prototype.error = function () { this._cr = undefined; };\n    AwsSignatureV4.prototype.getPayload = function () {\n      return awsRequest.getPayload()\n          .then(function (data) {\n            this.payload = data;\n          }.bind(this));\n    };\n    AwsSignatureV4.prototype.authorizationString = function () {\n      var authParts = [];\n\n      var credentials = this.credentialString();\n      var headers = this.canonicalHeaders();\n\n      authParts.push(['AWS4-HMAC-SHA256 Credential=', con.aws_key, '/', credentials].join(''));\n      authParts.push('SignedHeaders=' + headers.signedHeaders);\n      authParts.push('Signature=' + this.request.auth);\n\n      return authParts.join(', ');\n    };\n    AwsSignatureV4.prototype.stringToSign = function () {\n      var signParts = [];\n      signParts.push('AWS4-HMAC-SHA256');\n      signParts.push(this.request.dateString);\n      signParts.push(this.credentialString());\n      signParts.push(con.cryptoHexEncodedHash256(this.canonicalRequest()));\n      var result = signParts.join('\\n');\n\n      l.d('V4 stringToSign:', result);\n      return result;\n    };\n    AwsSignatureV4.prototype.credentialString = function () {\n      var credParts = [];\n\n      credParts.push(this.request.dateString.slice(0, 8));\n      credParts.push(con.awsRegion);\n      credParts.push('s3');\n      credParts.push('aws4_request');\n      return credParts.join('/');\n    };\n    AwsSignatureV4.prototype.canonicalQueryString = function () {\n      var qs = awsRequest.request.query_string || '',\n          search = uri([awsRequest.awsUrl, this.request.path, qs].join(\"\")).search,\n          searchParts = search.length ? search.split('&') : [],\n          encoded = [],\n          nameValue,\n          i;\n\n      for (i = 0; i < searchParts.length; i++) {\n        nameValue = searchParts[i].split(\"=\");\n        encoded.push({\n          name: encodeURIComponent(nameValue[0]),\n          value: nameValue.length > 1 ? encodeURIComponent(nameValue[1]) : null\n        })\n      }\n      var sorted = encoded.sort(function (a, b) {\n        if (a.name < b.name) {\n          return -1;\n        } else if (a.name > b.name) {\n          return 1;\n        }\n        return 0;\n      });\n\n      var result = [];\n      for (i = 0; i < sorted.length; i++) {\n        nameValue = sorted[i].value ? [sorted[i].name, sorted[i].value].join(\"=\") : sorted[i].name + '=';\n        result.push(nameValue);\n      }\n\n      return result.join('&');\n    };\n    AwsSignatureV4.prototype.getPayloadSha256Content = function () {\n      var result = this.request.contentSha256 || con.cryptoHexEncodedHash256(this.payload || '');\n      l.d(this.request.step, 'getPayloadSha256Content:', result);\n      return result;\n    };\n    AwsSignatureV4.prototype.canonicalHeaders = function () {\n      var canonicalHeaders = [],\n          keys = [],\n          i;\n\n      function addHeader(name, value) {\n        var key = name.toLowerCase();\n        keys.push(key);\n        canonicalHeaders[key] = value.replace(/\\s+/g, ' ');\n      }\n\n      if (this.request.md5_digest) {\n        addHeader(\"Content-Md5\", this.request.md5_digest);\n      }\n\n      addHeader('Host', awsRequest.awsHost);\n\n      if (this.request.contentType) {\n        addHeader('Content-Type', this.request.contentType || '');\n      }\n\n      var amzHeaders = this.request.x_amz_headers || {};\n      for (var key in amzHeaders) {\n        if (amzHeaders.hasOwnProperty(key)) {\n          addHeader(key, amzHeaders[key]);\n        }\n      }\n\n      var sortedKeys = keys.sort(function (a, b) {\n        if (a < b) {\n          return -1;\n        } else if (a > b) {\n          return 1;\n        }\n        return 0;\n      });\n\n      var result = [];\n\n      var unsigned_headers = [],\n          not_signed = this.request.not_signed_headers || [],\n          signed_headers = [];\n      for (i = 0; i < not_signed.length; i++) {\n        unsigned_headers.push(not_signed[i].toLowerCase());\n      }\n\n      for (i = 0; i < sortedKeys.length; i++) {\n        var k = sortedKeys[i];\n        result.push([k, canonicalHeaders[k]].join(\":\"));\n        if (unsigned_headers.indexOf(k) === -1) {\n          signed_headers.push(k);\n        }\n      }\n\n      return {\n        canonicalHeaders: result.join(\"\\n\"),\n        signedHeaders: signed_headers.join(\";\")\n      };\n    };\n    AwsSignatureV4.prototype.canonicalRequest = function () {\n      if (typeof this._cr !== 'undefined') { return this._cr; }\n      var canonParts = [];\n\n      canonParts.push(this.request.method);\n      canonParts.push(uri([awsRequest.awsUrl, awsRequest.getPath(), this.request.path].join(\"\")).pathname);\n      canonParts.push(this.canonicalQueryString() || '');\n\n      var headers = this.canonicalHeaders();\n      canonParts.push(headers.canonicalHeaders + '\\n');\n      canonParts.push(headers.signedHeaders);\n      canonParts.push(this.getPayloadSha256Content());\n\n      this._cr = canonParts.join(\"\\n\");\n      l.d(this.request.step, 'V4 CanonicalRequest:', this._cr);\n      return this._cr;\n    };\n    AwsSignatureV4.prototype.setHeaders = function (xhr) {\n      xhr.setRequestHeader(\"x-amz-content-sha256\", this.getPayloadSha256Content());\n    };\n\n    return con.awsSignatureVersion === '4' ? AwsSignatureV4 : AwsSignatureV2;\n  }\n  function authorizationMethod(awsRequest) {\n    var fileUpload = awsRequest.fileUpload,\n        con = fileUpload.con,\n        request = awsRequest.request;\n\n    function AuthorizationMethod() {\n      this.request = request;\n    }\n    AuthorizationMethod.prototype = Object.create(AuthorizationMethod.prototype);\n    AuthorizationMethod.prototype.request = {};\n    AuthorizationMethod.makeSignParamsObject = function (params) {\n      var out = {};\n      for (var param in params) {\n        if (!params.hasOwnProperty(param)) { continue; }\n        if (typeof params[param] === 'function') {\n          out[param] = params[param]();\n        } else {\n          out[param] = params[param];\n        }\n      }\n      return out;\n    };\n    AuthorizationMethod.prototype.authorize = function () {\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        awsRequest.currentXhr = xhr;\n\n        var stringToSign = awsRequest.stringToSign(),\n            url = [con.signerUrl, '?to_sign=', stringToSign, '&datetime=', request.dateString];\n        if (con.sendCanonicalRequestToSignerUrl) {\n          url.push('&canonical_request=');\n          url.push(encodeURIComponent(awsRequest.canonicalRequest()));\n        }\n        url = url.join(\"\");\n\n        var signParams = AuthorizationMethod.makeSignParamsObject(fileUpload.signParams);\n        for (var param in signParams) {\n          if (!signParams.hasOwnProperty(param)) { continue; }\n          url += ('&' + encodeURIComponent(param) + '=' + encodeURIComponent(signParams[param]));\n        }\n\n        if (con.xhrWithCredentials) {\n          xhr.withCredentials = true;\n        }\n\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            if (xhr.status === 200) {\n              awsRequest.signResponse(xhr.response, stringToSign, request.dateString)\n                  .then(resolve);\n            } else {\n              if ([401, 403].indexOf(xhr.status) > -1) {\n                var reason = \"status:\" + xhr.status;\n                fileUpload.deferredCompletion.reject('Permission denied ' + reason);\n                return reject(reason);\n              }\n              reject(\"Signature fetch returned status: \" + xhr.status);\n            }\n          }\n        };\n\n        xhr.onerror = function (xhr) {\n          reject('authorizedSend transport error: ' + xhr.responseText);\n        };\n\n        xhr.open('GET', url);\n        var signHeaders = AuthorizationMethod.makeSignParamsObject(con.signHeaders);\n        for (var header in signHeaders) {\n          if (!signHeaders.hasOwnProperty(header)) { continue; }\n          xhr.setRequestHeader(header, signHeaders[header])\n        }\n\n        if (typeof fileUpload.beforeSigner  === 'function') {\n          fileUpload.beforeSigner(xhr, url);\n        }\n        xhr.send();\n      });\n    };\n\n    function AuthorizationCustom() {\n      AuthorizationMethod.call(this);\n    }\n    AuthorizationCustom.prototype = Object.create(AuthorizationMethod.prototype);\n    AuthorizationCustom.prototype.authorize = function () {\n      return con.customAuthMethod(\n          AuthorizationMethod.makeSignParamsObject(fileUpload.signParams),\n          AuthorizationMethod.makeSignParamsObject(con.signHeaders),\n          awsRequest.stringToSign(),\n          request.dateString,\n          awsRequest.canonicalRequest())\n          .catch(function (reason) {\n            fileUpload.deferredCompletion.reject(reason);\n            throw reason;\n          });\n    };\n\n    if (typeof con.customAuthMethod === 'function') {\n      return new AuthorizationCustom()\n    }\n\n    return new AuthorizationMethod();\n  }\n\n  function awsUrl(con) {\n    var url;\n    if (con.aws_url) {\n      url = [con.aws_url];\n    } else {\n      if (con.s3Acceleration) {\n        url = [\"https://\", con.bucket, \".s3-accelerate\"];\n        con.cloudfront = true;\n      } else {\n        url = [\"https://\", (con.cloudfront ? con.bucket + \".\" : \"\"), \"s3\"];\n        if (con.awsRegion !== \"us-east-1\") {\n          url.push(\"-\", con.awsRegion);\n        }\n      }\n      url.push(\".amazonaws.com\");\n    }\n    return url.join(\"\");\n  }\n\n  function s3EncodedObjectName(fileName) {\n    var fileParts = fileName.split('/'),\n        encodedParts = [];\n    fileParts.forEach(function (p) {\n      var buf = [],\n          enc = encodeURIComponent(p);\n      for (var i = 0; i < enc.length; i++) {\n        buf.push(S3_EXTRA_ENCODED_CHARS[enc.charCodeAt(i)] || enc.charAt(i));\n      }\n      encodedParts.push(buf.join(\"\"));\n    });\n    return encodedParts.join('/');\n  }\n\n  function uri(url) {\n    var p,\n        href = url || '/';\n\n    try {\n      p = new URL(href);\n    } catch (e) {\n      p = document.createElement('a');\n      p.href = href;\n    }\n\n    return {\n      protocol: p.protocol, // => \"http:\"\n      hostname: p.hostname, // => \"example.com\"\n      // IE omits the leading slash, so add it if it's missing\n      pathname: p.pathname.replace(/(^\\/?)/, \"/\"), // => \"/pathname/\"\n      port: p.port, // => \"3000\"\n      search: (p.search[0] === '?') ? p.search.substr(1) : p.search, // => \"search=test\"\n      hash: p.hash, // => \"#hash\"\n      host: p.host  // => \"example.com:3000\"\n    };\n  }\n\n  function dateISOString(date) {\n    // Try to get the modified date as an ISO String, if the date exists\n    return date ? new Date(date).toISOString() : '';\n  }\n\n  function getAwsResponse(xhr) {\n    var code = elementText(xhr.responseText, \"Code\"),\n        msg = elementText(xhr.responseText, \"Message\");\n    return code.length ? ['AWS Code: ', code, ', Message:', msg].join(\"\") : '';\n  }\n\n  function elementText(source, element) {\n    var match = source.match([\"<\", element, \">(.+)</\", element, \">\"].join(\"\"));\n    return match ? match[1] : '';\n  }\n\n  function defer() {\n    var deferred = {}, promise;\n    promise = new Promise(function(resolve, reject){\n      deferred = {resolve: resolve, reject: reject};\n    });\n    return {\n      resolve: deferred.resolve,\n      reject: deferred.reject,\n      promise: promise\n    }\n  }\n\n  function extend(obj1, obj2, obj3) {\n    function ext(target, source) {\n      if (typeof source !== 'object') { return; }\n      for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    obj1 = obj1 || {};\n    obj2 = obj2 || {};\n    obj3 = obj3 || {};\n    ext(obj2, obj3);\n    ext(obj1, obj2);\n\n    return obj1;\n  }\n\n  function getSavedUploads(purge) {\n    var uploads = JSON.parse(historyCache.getItem('awsUploads') || '{}');\n\n    if (purge) {\n      for (var key in uploads) {\n        if (uploads.hasOwnProperty(key)) {\n          var upload = uploads[key],\n              completedAt = new Date(upload.completedAt || FAR_FUTURE);\n\n          if (completedAt < HOURS_AGO) {\n            // The upload is recent, let's keep it\n            delete uploads[key];\n          }\n        }\n      }\n\n      historyCache.setItem('awsUploads', JSON.stringify(uploads));\n    }\n\n    return uploads;\n  }\n\n  function uploadKey(fileUpload) {\n    // The key tries to give a signature to a file in the absence of its path.\n    // \"<filename>-<mimetype>-<modifieddate>-<filesize>\"\n    return [\n      fileUpload.file.name,\n      fileUpload.file.type,\n      dateISOString(fileUpload.file.lastModified),\n      fileUpload.sizeBytes\n    ].join(\"-\");\n  }\n\n  function saveUpload(uploadKey, upload) {\n    var uploads = getSavedUploads();\n    uploads[uploadKey] = upload;\n    historyCache.setItem('awsUploads', JSON.stringify(uploads));\n  }\n\n  function removeUpload(uploadKey) {\n    var uploads = getSavedUploads();\n    delete uploads[uploadKey];\n    historyCache.setItem('awsUploads', JSON.stringify(uploads));\n  }\n\n  function removeAtIndex(a, i) {\n    var idx = a.indexOf(i);\n    if (idx > -1) {\n      a.splice(idx, 1);\n      return true;\n    }\n  }\n\n  function readableFileSize(size) {\n    // Adapted from https://github.com/fkjaekel\n    // https://github.com/TTLabs/EvaporateJS/issues/13\n    var units = ['B', 'Kb', 'Mb', 'Gb', 'Tb', 'Pb', 'Eb', 'Zb', 'Yb'],\n        i = 0;\n    while(size >= 1024) {\n      size /= 1024;\n      ++i;\n    }\n    return [size.toFixed(2).replace('.00', ''), units[i]].join(\" \");\n  }\n\n  var historyCache;\n  function HistoryCache(mockLocalStorage) {\n    var supported = HistoryCache.supported();\n    this.cacheStore = mockLocalStorage ? {} : (supported ? localStorage : undefined);\n  }\n  HistoryCache.prototype.supported = false;\n  HistoryCache.prototype.cacheStore = undefined;\n  HistoryCache.prototype.getItem = function (key) { if (this.cacheStore) { return this.cacheStore[key]; }};\n  HistoryCache.prototype.setItem = function (key, value) { if (this.cacheStore) { this.cacheStore[key] = value; }};\n  HistoryCache.prototype.removeItem = function (key) { if (this.cacheStore) { return delete this.cacheStore[key] }};\n  HistoryCache.supported = function () {\n    var result = false;\n    if (typeof window !== 'undefined') {\n      if (!('localStorage' in window)) {\n        return result;\n      }\n    } else {\n      return result;\n    }\n\n    // Try to use storage (it might be disabled, e.g. user is in private mode)\n    try {\n      var k = '___test';\n      localStorage[k] = 'OK';\n      var test = localStorage[k];\n      delete localStorage[k];\n      return test === 'OK';\n    } catch (e) {\n      return result;\n    }\n  };\n\n  function noOpLogger() { return {d: function () {}, w: function () {}, e: function () {}}; }\n\n  l = noOpLogger();\n\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = Evaporate;\n  } else if (typeof window !== 'undefined') {\n    window.Evaporate = Evaporate;\n  }\n\n}());\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","var Buffer = require('safe-buffer').Buffer\n\n// prototype class for hash functions\nfunction Hash (blockSize, finalSize) {\n  this._block = Buffer.alloc(blockSize)\n  this._finalSize = finalSize\n  this._blockSize = blockSize\n  this._len = 0\n}\n\nHash.prototype.update = function (data, enc) {\n  if (typeof data === 'string') {\n    enc = enc || 'utf8'\n    data = Buffer.from(data, enc)\n  }\n\n  var block = this._block\n  var blockSize = this._blockSize\n  var length = data.length\n  var accum = this._len\n\n  for (var offset = 0; offset < length;) {\n    var assigned = accum % blockSize\n    var remainder = Math.min(length - offset, blockSize - assigned)\n\n    for (var i = 0; i < remainder; i++) {\n      block[assigned + i] = data[offset + i]\n    }\n\n    accum += remainder\n    offset += remainder\n\n    if ((accum % blockSize) === 0) {\n      this._update(block)\n    }\n  }\n\n  this._len += length\n  return this\n}\n\nHash.prototype.digest = function (enc) {\n  var rem = this._len % this._blockSize\n\n  this._block[rem] = 0x80\n\n  // zero (rem + 1) trailing bits, where (rem + 1) is the smallest\n  // non-negative solution to the equation (length + 1 + (rem + 1)) === finalSize mod blockSize\n  this._block.fill(0, rem + 1)\n\n  if (rem >= this._finalSize) {\n    this._update(this._block)\n    this._block.fill(0)\n  }\n\n  var bits = this._len * 8\n\n  // uint32\n  if (bits <= 0xffffffff) {\n    this._block.writeUInt32BE(bits, this._blockSize - 4)\n\n  // uint64\n  } else {\n    var lowBits = (bits & 0xffffffff) >>> 0\n    var highBits = (bits - lowBits) / 0x100000000\n\n    this._block.writeUInt32BE(highBits, this._blockSize - 8)\n    this._block.writeUInt32BE(lowBits, this._blockSize - 4)\n  }\n\n  this._update(this._block)\n  var hash = this._hash()\n\n  return enc ? hash.toString(enc) : hash\n}\n\nHash.prototype._update = function () {\n  throw new Error('_update must be implemented by subclass')\n}\n\nmodule.exports = Hash\n","var exports = module.exports = function SHA (algorithm) {\n  algorithm = algorithm.toLowerCase()\n\n  var Algorithm = exports[algorithm]\n  if (!Algorithm) throw new Error(algorithm + ' is not supported (we accept pull requests)')\n\n  return new Algorithm()\n}\n\nexports.sha = require('./sha')\nexports.sha1 = require('./sha1')\nexports.sha224 = require('./sha224')\nexports.sha256 = require('./sha256')\nexports.sha384 = require('./sha384')\nexports.sha512 = require('./sha512')\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-0, as defined\n * in FIPS PUB 180-1\n * This source code is derived from sha1.js of the same repository.\n * The difference between SHA-0 and SHA-1 is just a bitwise rotate left\n * operation was added.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha, Hash)\n\nSha.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16]\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha1 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha1, Hash)\n\nSha1.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl1 (num) {\n  return (num << 1) | (num >>> 31)\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha1.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = rotl1(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16])\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha1.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha1\n","/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = require('inherits')\nvar Sha256 = require('./sha256')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar W = new Array(64)\n\nfunction Sha224 () {\n  this.init()\n\n  this._w = W // new Array(64)\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha224, Sha256)\n\nSha224.prototype.init = function () {\n  this._a = 0xc1059ed8\n  this._b = 0x367cd507\n  this._c = 0x3070dd17\n  this._d = 0xf70e5939\n  this._e = 0xffc00b31\n  this._f = 0x68581511\n  this._g = 0x64f98fa7\n  this._h = 0xbefa4fa4\n\n  return this\n}\n\nSha224.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(28)\n\n  H.writeInt32BE(this._a, 0)\n  H.writeInt32BE(this._b, 4)\n  H.writeInt32BE(this._c, 8)\n  H.writeInt32BE(this._d, 12)\n  H.writeInt32BE(this._e, 16)\n  H.writeInt32BE(this._f, 20)\n  H.writeInt32BE(this._g, 24)\n\n  return H\n}\n\nmodule.exports = Sha224\n","/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n  0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n  0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n  0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n  0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n  0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n  0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n  0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n  0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n  0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n  0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n  0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n  0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n  0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n  0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n  0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2\n]\n\nvar W = new Array(64)\n\nfunction Sha256 () {\n  this.init()\n\n  this._w = W // new Array(64)\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha256, Hash)\n\nSha256.prototype.init = function () {\n  this._a = 0x6a09e667\n  this._b = 0xbb67ae85\n  this._c = 0x3c6ef372\n  this._d = 0xa54ff53a\n  this._e = 0x510e527f\n  this._f = 0x9b05688c\n  this._g = 0x1f83d9ab\n  this._h = 0x5be0cd19\n\n  return this\n}\n\nfunction ch (x, y, z) {\n  return z ^ (x & (y ^ z))\n}\n\nfunction maj (x, y, z) {\n  return (x & y) | (z & (x | y))\n}\n\nfunction sigma0 (x) {\n  return (x >>> 2 | x << 30) ^ (x >>> 13 | x << 19) ^ (x >>> 22 | x << 10)\n}\n\nfunction sigma1 (x) {\n  return (x >>> 6 | x << 26) ^ (x >>> 11 | x << 21) ^ (x >>> 25 | x << 7)\n}\n\nfunction gamma0 (x) {\n  return (x >>> 7 | x << 25) ^ (x >>> 18 | x << 14) ^ (x >>> 3)\n}\n\nfunction gamma1 (x) {\n  return (x >>> 17 | x << 15) ^ (x >>> 19 | x << 13) ^ (x >>> 10)\n}\n\nSha256.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n  var f = this._f | 0\n  var g = this._g | 0\n  var h = this._h | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 64; ++i) W[i] = (gamma1(W[i - 2]) + W[i - 7] + gamma0(W[i - 15]) + W[i - 16]) | 0\n\n  for (var j = 0; j < 64; ++j) {\n    var T1 = (h + sigma1(e) + ch(e, f, g) + K[j] + W[j]) | 0\n    var T2 = (sigma0(a) + maj(a, b, c)) | 0\n\n    h = g\n    g = f\n    f = e\n    e = (d + T1) | 0\n    d = c\n    c = b\n    b = a\n    a = (T1 + T2) | 0\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n  this._f = (f + this._f) | 0\n  this._g = (g + this._g) | 0\n  this._h = (h + this._h) | 0\n}\n\nSha256.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(32)\n\n  H.writeInt32BE(this._a, 0)\n  H.writeInt32BE(this._b, 4)\n  H.writeInt32BE(this._c, 8)\n  H.writeInt32BE(this._d, 12)\n  H.writeInt32BE(this._e, 16)\n  H.writeInt32BE(this._f, 20)\n  H.writeInt32BE(this._g, 24)\n  H.writeInt32BE(this._h, 28)\n\n  return H\n}\n\nmodule.exports = Sha256\n","var inherits = require('inherits')\nvar SHA512 = require('./sha512')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar W = new Array(160)\n\nfunction Sha384 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 128, 112)\n}\n\ninherits(Sha384, SHA512)\n\nSha384.prototype.init = function () {\n  this._ah = 0xcbbb9d5d\n  this._bh = 0x629a292a\n  this._ch = 0x9159015a\n  this._dh = 0x152fecd8\n  this._eh = 0x67332667\n  this._fh = 0x8eb44a87\n  this._gh = 0xdb0c2e0d\n  this._hh = 0x47b5481d\n\n  this._al = 0xc1059ed8\n  this._bl = 0x367cd507\n  this._cl = 0x3070dd17\n  this._dl = 0xf70e5939\n  this._el = 0xffc00b31\n  this._fl = 0x68581511\n  this._gl = 0x64f98fa7\n  this._hl = 0xbefa4fa4\n\n  return this\n}\n\nSha384.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(48)\n\n  function writeInt64BE (h, l, offset) {\n    H.writeInt32BE(h, offset)\n    H.writeInt32BE(l, offset + 4)\n  }\n\n  writeInt64BE(this._ah, this._al, 0)\n  writeInt64BE(this._bh, this._bl, 8)\n  writeInt64BE(this._ch, this._cl, 16)\n  writeInt64BE(this._dh, this._dl, 24)\n  writeInt64BE(this._eh, this._el, 32)\n  writeInt64BE(this._fh, this._fl, 40)\n\n  return H\n}\n\nmodule.exports = Sha384\n","var inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n]\n\nvar W = new Array(160)\n\nfunction Sha512 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 128, 112)\n}\n\ninherits(Sha512, Hash)\n\nSha512.prototype.init = function () {\n  this._ah = 0x6a09e667\n  this._bh = 0xbb67ae85\n  this._ch = 0x3c6ef372\n  this._dh = 0xa54ff53a\n  this._eh = 0x510e527f\n  this._fh = 0x9b05688c\n  this._gh = 0x1f83d9ab\n  this._hh = 0x5be0cd19\n\n  this._al = 0xf3bcc908\n  this._bl = 0x84caa73b\n  this._cl = 0xfe94f82b\n  this._dl = 0x5f1d36f1\n  this._el = 0xade682d1\n  this._fl = 0x2b3e6c1f\n  this._gl = 0xfb41bd6b\n  this._hl = 0x137e2179\n\n  return this\n}\n\nfunction Ch (x, y, z) {\n  return z ^ (x & (y ^ z))\n}\n\nfunction maj (x, y, z) {\n  return (x & y) | (z & (x | y))\n}\n\nfunction sigma0 (x, xl) {\n  return (x >>> 28 | xl << 4) ^ (xl >>> 2 | x << 30) ^ (xl >>> 7 | x << 25)\n}\n\nfunction sigma1 (x, xl) {\n  return (x >>> 14 | xl << 18) ^ (x >>> 18 | xl << 14) ^ (xl >>> 9 | x << 23)\n}\n\nfunction Gamma0 (x, xl) {\n  return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7)\n}\n\nfunction Gamma0l (x, xl) {\n  return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7 | xl << 25)\n}\n\nfunction Gamma1 (x, xl) {\n  return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6)\n}\n\nfunction Gamma1l (x, xl) {\n  return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6 | xl << 26)\n}\n\nfunction getCarry (a, b) {\n  return (a >>> 0) < (b >>> 0) ? 1 : 0\n}\n\nSha512.prototype._update = function (M) {\n  var W = this._w\n\n  var ah = this._ah | 0\n  var bh = this._bh | 0\n  var ch = this._ch | 0\n  var dh = this._dh | 0\n  var eh = this._eh | 0\n  var fh = this._fh | 0\n  var gh = this._gh | 0\n  var hh = this._hh | 0\n\n  var al = this._al | 0\n  var bl = this._bl | 0\n  var cl = this._cl | 0\n  var dl = this._dl | 0\n  var el = this._el | 0\n  var fl = this._fl | 0\n  var gl = this._gl | 0\n  var hl = this._hl | 0\n\n  for (var i = 0; i < 32; i += 2) {\n    W[i] = M.readInt32BE(i * 4)\n    W[i + 1] = M.readInt32BE(i * 4 + 4)\n  }\n  for (; i < 160; i += 2) {\n    var xh = W[i - 15 * 2]\n    var xl = W[i - 15 * 2 + 1]\n    var gamma0 = Gamma0(xh, xl)\n    var gamma0l = Gamma0l(xl, xh)\n\n    xh = W[i - 2 * 2]\n    xl = W[i - 2 * 2 + 1]\n    var gamma1 = Gamma1(xh, xl)\n    var gamma1l = Gamma1l(xl, xh)\n\n    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n    var Wi7h = W[i - 7 * 2]\n    var Wi7l = W[i - 7 * 2 + 1]\n\n    var Wi16h = W[i - 16 * 2]\n    var Wi16l = W[i - 16 * 2 + 1]\n\n    var Wil = (gamma0l + Wi7l) | 0\n    var Wih = (gamma0 + Wi7h + getCarry(Wil, gamma0l)) | 0\n    Wil = (Wil + gamma1l) | 0\n    Wih = (Wih + gamma1 + getCarry(Wil, gamma1l)) | 0\n    Wil = (Wil + Wi16l) | 0\n    Wih = (Wih + Wi16h + getCarry(Wil, Wi16l)) | 0\n\n    W[i] = Wih\n    W[i + 1] = Wil\n  }\n\n  for (var j = 0; j < 160; j += 2) {\n    Wih = W[j]\n    Wil = W[j + 1]\n\n    var majh = maj(ah, bh, ch)\n    var majl = maj(al, bl, cl)\n\n    var sigma0h = sigma0(ah, al)\n    var sigma0l = sigma0(al, ah)\n    var sigma1h = sigma1(eh, el)\n    var sigma1l = sigma1(el, eh)\n\n    // t1 = h + sigma1 + ch + K[j] + W[j]\n    var Kih = K[j]\n    var Kil = K[j + 1]\n\n    var chh = Ch(eh, fh, gh)\n    var chl = Ch(el, fl, gl)\n\n    var t1l = (hl + sigma1l) | 0\n    var t1h = (hh + sigma1h + getCarry(t1l, hl)) | 0\n    t1l = (t1l + chl) | 0\n    t1h = (t1h + chh + getCarry(t1l, chl)) | 0\n    t1l = (t1l + Kil) | 0\n    t1h = (t1h + Kih + getCarry(t1l, Kil)) | 0\n    t1l = (t1l + Wil) | 0\n    t1h = (t1h + Wih + getCarry(t1l, Wil)) | 0\n\n    // t2 = sigma0 + maj\n    var t2l = (sigma0l + majl) | 0\n    var t2h = (sigma0h + majh + getCarry(t2l, sigma0l)) | 0\n\n    hh = gh\n    hl = gl\n    gh = fh\n    gl = fl\n    fh = eh\n    fl = el\n    el = (dl + t1l) | 0\n    eh = (dh + t1h + getCarry(el, dl)) | 0\n    dh = ch\n    dl = cl\n    ch = bh\n    cl = bl\n    bh = ah\n    bl = al\n    al = (t1l + t2l) | 0\n    ah = (t1h + t2h + getCarry(al, t1l)) | 0\n  }\n\n  this._al = (this._al + al) | 0\n  this._bl = (this._bl + bl) | 0\n  this._cl = (this._cl + cl) | 0\n  this._dl = (this._dl + dl) | 0\n  this._el = (this._el + el) | 0\n  this._fl = (this._fl + fl) | 0\n  this._gl = (this._gl + gl) | 0\n  this._hl = (this._hl + hl) | 0\n\n  this._ah = (this._ah + ah + getCarry(this._al, al)) | 0\n  this._bh = (this._bh + bh + getCarry(this._bl, bl)) | 0\n  this._ch = (this._ch + ch + getCarry(this._cl, cl)) | 0\n  this._dh = (this._dh + dh + getCarry(this._dl, dl)) | 0\n  this._eh = (this._eh + eh + getCarry(this._el, el)) | 0\n  this._fh = (this._fh + fh + getCarry(this._fl, fl)) | 0\n  this._gh = (this._gh + gh + getCarry(this._gl, gl)) | 0\n  this._hh = (this._hh + hh + getCarry(this._hl, hl)) | 0\n}\n\nSha512.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(64)\n\n  function writeInt64BE (h, l, offset) {\n    H.writeInt32BE(h, offset)\n    H.writeInt32BE(l, offset + 4)\n  }\n\n  writeInt64BE(this._ah, this._al, 0)\n  writeInt64BE(this._bh, this._bl, 8)\n  writeInt64BE(this._ch, this._cl, 16)\n  writeInt64BE(this._dh, this._dl, 24)\n  writeInt64BE(this._eh, this._el, 32)\n  writeInt64BE(this._fh, this._fl, 40)\n  writeInt64BE(this._gh, this._gl, 48)\n  writeInt64BE(this._hh, this._hl, 56)\n\n  return H\n}\n\nmodule.exports = Sha512\n","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","const Cookies = require('js-cookie');\r\nconst createHash = require('sha.js')\r\nconst Evaporate = require('evaporate');\r\nconst SparkMD5 = require('spark-md5');\r\n\r\nconst request = function (method, url, data, headers, el, cb) {\r\n        let req = new XMLHttpRequest()\r\n        req.open(method, url, true)\r\n\r\n        Object.keys(headers).forEach(function (key) {\r\n            req.setRequestHeader(key, headers[key])\r\n        });\r\n\r\n        req.onload = function () {\r\n            cb(req.status, req.responseText)\r\n        };\r\n\r\n        req.onerror = req.onabort = function () {\r\n            disableSubmit(false)\r\n            error(el, 'Sorry, failed to upload file.')\r\n        };\r\n\r\n        req.send(data)\r\n    };\r\n\r\nconst parseNameFromUrl = function (url) {\r\n    return decodeURIComponent((url + '').replace(/\\+/g, '%20'));\r\n};\r\n\r\nconst parseJson = function (json) {\r\n    let data;\r\n    try {\r\n        data = JSON.parse(json);\r\n    }\r\n    catch (e) {\r\n        data = null;\r\n    }\r\n    return data\r\n};\r\n\r\nconst updateProgressBar = function (element, progressRatio) {\r\n    const bar = element.querySelector('.bar');\r\n    bar.style.width = Math.round(progressRatio * 100) + '%';\r\n};\r\n\r\nconst error = function(el, msg) {\r\n    el.className = 's3direct form-active'\r\n    el.querySelector('.file-input').value = ''\r\n    alert(msg)\r\n};\r\n\r\nlet concurrentUploads = 0;\r\n\r\nconst disableSubmit = function(status) {\r\n    const submitRow = document.querySelector('.submit-row')\r\n    if( ! submitRow) return\r\n\r\n    const buttons = submitRow.querySelectorAll('input[type=submit],button[type=submit]');\r\n\r\n    if (status === true) concurrentUploads++\r\n    else concurrentUploads--\r\n\r\n    ;[].forEach.call(buttons, function(el){\r\n        el.disabled = (concurrentUploads !== 0)\r\n    })\r\n}\r\n\r\nconst beginUpload = function (element) {\r\n    disableSubmit(true);\r\n    element.className = 's3direct progress-active'\r\n};\r\n\r\nconst finishUpload = function (element, awsBucketUrl, objectKey) {\r\n    const link = element.querySelector('.file-link');\r\n    const url = element.querySelector('.file-url');\r\n    url.value = awsBucketUrl + '/' + objectKey;\r\n    link.setAttribute('href', url.value);\r\n    link.innerHTML = parseNameFromUrl(url.value).split('/').pop();\r\n\r\n    element.className = 's3direct link-active';\r\n    element.querySelector('.bar').style.width = '0%';\r\n    disableSubmit(false);\r\n};\r\n\r\nconst computeMd5 = function (data) {\r\n    return btoa(SparkMD5.ArrayBuffer.hash(data, true));\r\n};\r\n\r\nconst computeSha256 = function (data) {\r\n    return createHash('sha256').update(data, 'utf-8').digest('hex');\r\n};\r\n\r\nconst initiateMultipartUpload = function (element, signingUrl, objectKey, awsKey, awsRegion, awsBucket, awsBucketUrl, cacheControl, contentDisposition, acl, serverSideEncryption, file) {\r\n    // Enclosed so we can propagate errors to the correct `element` in case of failure.\r\n    const getAwsV4Signature = function (signParams, signHeaders, stringToSign, signatureDateTime, canonicalRequest) {\r\n        return new Promise(function (resolve, reject) {\r\n            const form          = new FormData(),\r\n                  csrfTokenName = element.querySelector('.csrf-cookie-name').value,\r\n                  csrfInput     = document.querySelector('input[name=csrfmiddlewaretoken]'),\r\n                  csrfToken     = csrfInput ? csrfInput.value : Cookies.get(csrfCookieNameInput.value),\r\n                  headers       = {'X-CSRFToken': csrfToken};\r\n            form.append('to_sign', stringToSign);\r\n            form.append('datetime', signatureDateTime);\r\n            request('POST', signingUrl, form, headers, element, function (status, response) {\r\n                switch (status) {\r\n                    case 200:\r\n                        resolve(response);\r\n                        break;\r\n                    default:\r\n                        error(element, 'Could not generate AWS v4 signature.')\r\n                        reject();\r\n                        break;\r\n                }\r\n            });\r\n        })\r\n    };\r\n\r\n    const generateAmazonHeaders = function (acl, serverSideEncryption) {\r\n        // Either of these may be null, so don't add them unless they exist:\r\n        let headers = {}\r\n        if (acl) headers['x-amz-acl'] = acl;\r\n        if (serverSideEncryption) headers['x-amz-server-side-encryption'] = serverSideEncryption;\r\n        return headers;\r\n    };\r\n\r\n    Evaporate.create(\r\n        {\r\n            //signerUrl: signingUrl,\r\n            customAuthMethod: getAwsV4Signature,\r\n            aws_key: awsKey,\r\n            bucket: awsBucket,\r\n            awsRegion: awsRegion,\r\n            computeContentMd5: true,\r\n            cryptoMd5Method: computeMd5,\r\n            cryptoHexEncodedHash256: computeSha256,\r\n            partSize: 20 * 1024 * 1024,\r\n            logging: true,\r\n            debug: true,\r\n            allowS3ExistenceOptimization: true,\r\n            s3FileCacheHoursAgo: 12,\r\n        }\r\n    ).then(function (evaporate) {\r\n        beginUpload(element);\r\n        evaporate.add({\r\n            name: objectKey,\r\n            file: file,\r\n            contentType: file.type,\r\n            xAmzHeadersAtInitiate: generateAmazonHeaders(acl, serverSideEncryption),\r\n            notSignedHeadersAtInitiate: {'Cache-Control': cacheControl, 'Content-Disposition': contentDisposition},\r\n            progress: function (progressRatio, stats) { updateProgressBar(element, progressRatio); },\r\n        }).then(\r\n            function (awsS3ObjectKey) {\r\n                console.log('Successfully uploaded to:', awsS3ObjectKey);\r\n                finishUpload(element, awsBucketUrl, awsS3ObjectKey);\r\n            },\r\n            function (reason) {\r\n                console.error('Failed to upload because:', reason);\r\n                return error(element, reason)\r\n            }\r\n        )\r\n    });\r\n};\r\n\r\nconst checkFileAndInitiateUpload = function(event) {\r\n    console.log('Checking file and initiating upload')\r\n    const element             = event.target.parentElement,\r\n          csrfInput           = document.querySelector('input[name=csrfmiddlewaretoken]'),\r\n          file                = element.querySelector('.file-input').files[0],\r\n          dest                = element.querySelector('.file-dest').value,\r\n          csrfCookieNameInput = element.querySelector('.csrf-cookie-name'),\r\n          destinationCheckUrl = element.getAttribute('data-policy-url'),\r\n          signerUrl           = element.getAttribute('data-signing-url'),\r\n          form                = new FormData(),\r\n          csrfToken           = csrfInput ? csrfInput.value : Cookies.get(csrfCookieNameInput.value),\r\n          headers             = {'X-CSRFToken': csrfToken };\r\n\r\n    form.append('dest', dest)\r\n    form.append('name', file.name)\r\n    form.append('type', file.type)\r\n    form.append('size', file.size)\r\n    request('POST', destinationCheckUrl, form, headers, element, function(status, response) {\r\n        const uploadParameters = parseJson(response)\r\n        switch(status) {\r\n            case 200:\r\n                initiateMultipartUpload(\r\n                    element,\r\n                    signerUrl,\r\n                    uploadParameters.object_key,\r\n                    uploadParameters.access_key_id,\r\n                    uploadParameters.region,\r\n                    uploadParameters.bucket,\r\n                    uploadParameters.bucket_url,\r\n                    uploadParameters.cache_control,\r\n                    uploadParameters.content_disposition,\r\n                    uploadParameters.acl,\r\n                    uploadParameters.server_side_encryption,\r\n                    file\r\n                );\r\n                break;\r\n            case 400:\r\n            case 403:\r\n            case 500:\r\n                error(element, uploadParameters.error)\r\n                break;\r\n            default:\r\n                error(element, 'Sorry, could not get upload URL.')\r\n        }\r\n    })\r\n}\r\n"],"sourceRoot":""}